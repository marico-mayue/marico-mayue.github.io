<!doctype html>



  


<html class="theme-next pisces use-motion">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">








  <link rel="shortcut icon" type="image/x-icon" href="/images/avatar.png?v=5.0.1">






<meta name="description" content="Front-End Developer">
<meta property="og:type" content="website">
<meta property="og:title" content="MaYue&#39;s Notes">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="MaYue&#39;s Notes">
<meta property="og:description" content="Front-End Developer">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MaYue&#39;s Notes">
<meta name="twitter:description" content="Front-End Developer">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/">

  <title> MaYue's Notes </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">MaYue's Notes</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input">
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', '我的博客笔记','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/10/26/通过使用基于Vue的Onsen UI Tab切换提高用户体验/" itemprop="url">
                  通过使用基于Vue的Onsen UI Tab切换提高用户体验
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-10-26T00:00:00+08:00" content="2017-10-26">
              2017-10-26
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/移动web/" itemprop="url" rel="index">
                    <span itemprop="name">移动web</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/10/26/通过使用基于Vue的Onsen UI Tab切换提高用户体验/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/10/26/通过使用基于Vue的Onsen UI Tab切换提高用户体验/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://p0.qhimg.com/t01e2ee92510ec86e0e.gif" alt></p>
<blockquote>
<p>原文地址：<a href="https://medium.com/the-web-tub/improve-ux-with-swiping-tab-bar-using-onsen-ui-for-vue-4c7d0e5171f0" target="_blank" rel="noopener">https://medium.com/the-web-tub/improve-ux-with-swiping-tab-bar-using-onsen-ui-for-vue-4c7d0e5171f0</a></p>
</blockquote>
<h4 id="Tab-Bar滑动切换"><a href="#Tab-Bar滑动切换" class="headerlink" title="Tab Bar滑动切换"></a>Tab Bar滑动切换</h4><p>现如今Cordova应用和PWA应用在移动设备上的应用是非常流行的。提供原生页面的外观和感觉是提高用户体验的关键，但是这往往不是一件容易的事情。值得肯定的是，创建生成一个有样式的复选框和单选按钮根本就不是问题而是一个实实在在的功能，我们追求的应用质量提升是基于用户交互的。</p>
<p>一个可滑动切换的tab bar将应用的内容分割成不同的页面，并且可以允许让用户自己的手指打开他期待的页面进入可视区。如果与此同时由于用户拖动了页面，应用改变了它自身的外观会怎么样？听上去很有趣但是很难吗？让我们看看使用Vue.js实际上是多么的简单。</p>
<h4 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h4><p>首先，我们需要一个tab bar滑动切换组件，这里有一大堆提供不同功能的可选择产品，这里我们使用Onsen UI提供的tab bar组件，它能够支持在切换时自定义操作行为。也许你并不了解它，Onsen UI其实有着一套iOS和Android基于Vue应用的组件库。对于一个现有的项目，可以使用NPM或Yarn来安装它。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$&gt; npm install onsenui vue-onsenui --save-dev</span><br><span class="line">$&gt; yarn add onsenui vue-onsenui -D</span><br></pre></td></tr></table></figure>
<p>在app中必须包含一些必要的文件；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import &apos;onsenui/css/onsenui.css&apos;; // Webpack CSS import</span><br><span class="line">import &apos;onsenui/css/onsen-css-components.css&apos;; // Webpack CSS import</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import VueOnsen from &apos;vue-onsenui&apos;;</span><br><span class="line">Vue.use(VueOnsen);</span><br></pre></td></tr></table></figure>
<p>因此，新的项目可以使用Vue CLI快速开始，并且可以选择性的添加Vuex和其他的一些功能。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$&gt; vue init OnsenUI/vue-cordova-webpack # For Cordova apps</span><br><span class="line">$&gt; vue init OnsenUI/vue-pwa-webpack # For PWA</span><br></pre></td></tr></table></figure>
<h4 id="使用Vue的Tab-Bar滑动切换"><a href="#使用Vue的Tab-Bar滑动切换" class="headerlink" title="使用Vue的Tab Bar滑动切换"></a>使用Vue的Tab Bar滑动切换</h4><p>使用了Onsen UI后在Vue模板中添加一个小型的tab bar切换是非常简单的。可以如下去定义：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;v-ons-tabbar swipeable :tabs=&quot;tabs&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>如果有必要，<strong>swipeable</strong>属性能够在App的不同时刻切换开启允许和阻止侧滑，<strong>tabs</strong>是一个简单的数组对象用<strong>page</strong>，<strong>label</strong>，<strong>icon</strong>来描述每个选项卡的外观样式和内容。</p>
<p>在这之上，有更多的配置参数项可以用来修改默认行为再添加一些额外的自定义项就能够得到一个独一无二样式的app。让我们看下例子，<strong>on-swipe</strong>配置项可以用来当切换滑动页面时逐渐改变界面的颜色。</p>
<p><img src="http://p0.qhimg.com/t012aa187667a5fa7ba.gif" alt></p>
<p>这里用<strong>v-ons-page</strong>, <strong>v-ons-toolbar</strong>和<strong>v-ons-tabbar</strong>组件来创建一个由简单toolbar和tab bar构成的页面。<strong>tabs</strong>属性包含一个标签页的数组，<strong>page</strong>和<strong>label</strong>属性将会被tab bar组件自身所用来描述标签的内容和外观样式。同时会提供类似<strong>theme</strong>这样的自定义属性，这些主题是由<strong>RGB</strong>颜色值组成的简单数组。</p>
<p>请注意<strong>swipeTheme</strong>计算属性是如何传递给toolbar组件和tab bar组件的。当这个属性变化时这两个组件的样式也会同时更新。在<strong>on-swipe</strong><br>配置项中也提供了<strong>onSwipe</strong>函数方法，这个方法将会在当用户的手指在手机屏幕上移动时调用。</p>
<h4 id="线性插值"><a href="#线性插值" class="headerlink" title="线性插值"></a>线性插值</h4><p>线性插值简单讲就是在两个数据值之间产生中间点的公式。我们想在屏幕上逐渐从原始坐标x0移动一个点到一个结束点x1，我们仅仅需要做的是给这个公式提供两个点的位置和完成率从而得到这个点在特定位置停止时的坐标。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const lerp = (x0, x1, r) =&gt; (1 — r) * x0 + r * x1;</span><br></pre></td></tr></table></figure>
<p>比如说，我们想从x0到x1生成3个点，第一步将需要<strong>r = 0.25</strong>（完成25%），第二步<strong>r = 0.5</strong>（完成50%），第三部<strong>r = 0.75</strong>（完成75%）。当然了只要提供不同的比率它也能够生成我们想要的一样多的中间点。</p>
<p>这不仅适用于物理距离，在前面的代码中，我们希望根据切换位置将一种颜色逐渐转换为另一种颜色。RGB颜色由3个值组成并可以分别插值，其他表示也可以被插值，但它们意味着更复杂的代码。</p>
<p>如果给每个选项卡分配一个不同的RGB颜色数组，我们将能够根据当前的滑动位置插入这些值到每一个中去。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">onSwipe(index, animationOptions) &#123;</span><br><span class="line">  this.animationOptions = animationOptions;</span><br><span class="line">  </span><br><span class="line">  const x0 = Math.floor(index),</span><br><span class="line">        x1 = Math.ceil(index),</span><br><span class="line">        ratio = index % 1;</span><br><span class="line">  </span><br><span class="line">  this.colors = this.colors.map((c, i) =&gt;</span><br><span class="line">    lerp(</span><br><span class="line">      this.tabs[x0].theme[i],</span><br><span class="line">      this.tabs[x1].theme[i],</span><br><span class="line">      ratio</span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这将分配一个新的颜色数组<strong>this.colors</strong>，根据这些颜色值使用<strong>this.swipeTheme</strong>计算属性来创建有效的CSS语法。</p>
<p>注意<strong>animationOptions</strong>也作为第二个参数提供。当页面划出时它将是空值，当释放页面切换时，tab bar将用手指的速度完成切换滑动动画。这个给定的速度值将作为<strong>duration</strong>和<strong>timing</strong>来创建一个CSS动画效果。用这样的方式，所有的动画将会同步执行。</p>
<h4 id="接下来是什么"><a href="#接下来是什么" class="headerlink" title="接下来是什么"></a>接下来是什么</h4><p>可以看出，Vue的声明性让这一切真的很简单。我们可以去更新一个特定的属性而不是从DOM中抓取元素手动去改变其样式。一段稍早前代码完成的Cordova应用在这里（<a href="https://onsenui.github.io/vue-onsenui-kitchensink/）能够找到。它遵循相同的概念增加了更多的插值公式。假如你想知道更多关于基于Vue的Onsen" target="_blank" rel="noopener">https://onsenui.github.io/vue-onsenui-kitchensink/）能够找到。它遵循相同的概念增加了更多的插值公式。假如你想知道更多关于基于Vue的Onsen</a> UI，可以看看其官方网站（<a href="https://onsen.io/vue/）。" target="_blank" rel="noopener">https://onsen.io/vue/）。</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/09/07/AngularJS和React的比较介绍/" itemprop="url">
                  AngularJS和React的比较介绍
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-09-07T00:00:00+08:00" content="2017-09-07">
              2017-09-07
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/web开发/" itemprop="url" rel="index">
                    <span itemprop="name">web开发</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/09/07/AngularJS和React的比较介绍/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/09/07/AngularJS和React的比较介绍/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://static.oschina.net/uploads/space/2016/0909/071937_TS50_2720166.png" alt></p>
<blockquote>
<p>原文地址：<a href="https://medium.com/@kellywhiting/a-comparative-introduction-to-front-end-frameworks-angularjs-and-react-dd7c7410afc0" target="_blank" rel="noopener">https://medium.com/@kellywhiting/a-comparative-introduction-to-front-end-frameworks-angularjs-and-react-dd7c7410afc0</a></p>
</blockquote>
<p>我一直在努力提高自己对AngularJS和React这两大前端框架的理解力和掌握能力，因为它们在硅谷看上去似乎是最受欢迎的。当然，React似乎是这其中的领先者。像Facebook，Instagram，Airbnb，Dropbox，ProductHunt，Netflix都在使用它。AngularJS在Google，PayPal，YouTube，Vevo，Upwork都有落地项目中使用。</p>
<p>因此如果你也正在尝试使用这两框架中的一个或二者都想，那这篇介绍的目的就是帮助大家去理解它们的基本实现。作为研究学习的开始，我已经把一个应用程序设置分成了4个步骤：</p>
<ol>
<li><p>用<code>Properties</code>和<code>Methods</code>建立一个<code>Controller</code></p>
</li>
<li><p>初始化和渲染</p>
</li>
<li><p>在<code>Scopes</code>间传递变量</p>
</li>
<li><p>添加事件</p>
</li>
</ol>
<p>一旦你掌握了所有的知识，你可以自己决定你更喜欢哪一个框架。分享你的评论让我知道你是怎么认为的。</p>
<p>作为开始，我将做一个<code>MVC</code>(Model-View-Controller)架构模式的快速总结。以下是我最喜欢的一种交互视觉解释，因为它也包含了数据库和客户端或者路由的关系。通常来说，MVC设计模式的实现是为了在函数之间建立一个清晰的分离。控制器<code>Controller</code>处理程序逻辑和客户端交互。模型层<code>Model</code>处理真实的数据。视图层<code>View</code>管理着客户端的表现层的页面渲染。当然这种设计模式是一个标准化的概念，实际上，每一个框架的实现都有它自己独特的方式。</p>
<p><img src="http://p0.qhimg.com/t0126af7f6cab871cb1.png" alt></p>
<p>来源: CodeBox.in</p>
<h3 id="AngularJS"><a href="#AngularJS" class="headerlink" title="AngularJS"></a>AngularJS</h3><p>AngularJS是<code>MVW</code> (Model-View-Whatever)模式的一个典型的例子，它使<code>Model</code>层和<code>Controller</code>层结合在一个文件中，同时也介绍了<code>ng-xxx</code>的指令<code>directives</code>的使用，以及为一个给定节点确定某些属性和绑定函数，以便于Angular知道如何去处理它们。想要建立一个基本的Angular程序你可以执行完我的这四个步骤，可以看以下的代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//myJSFile.js</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">angular.module(&apos;myApp&apos;, [])</span><br><span class="line">  .controller(&apos;controllerName&apos;, function() &#123;</span><br><span class="line">    this.myGreeting = &apos;hello&apos;;</span><br><span class="line">    this.greetingsArray = [&apos;goodbye&apos;, &apos;welcome&apos;];</span><br><span class="line">  &#125;</span><br><span class="line">  this.pickGreeting = () =&gt; &#123;</span><br><span class="line">    console.log(&apos;select this greeting&apos;);</span><br><span class="line">  &#125;; </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//subComponent.js</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">angular.module(&apos;myApp&apos;)</span><br><span class="line">  .component(&apos;subComponent&apos;, &#123;</span><br><span class="line">    bindings: &#123;select: &apos;&lt;&apos;, greetings: &apos;&lt;&apos;&#125;,</span><br><span class="line">    templateURL: &apos;filePath/templates/subComponent.html&apos;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;! html file of parent component&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;html ng-app=&apos;myApp&apos;&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    `&lt;script src=&apos;https://ajax.googleapis.com/ajax/libs/angularjs/ 1.6.5/angular.min.js&apos;&gt;`&lt;/script&gt;</span><br><span class="line">    `&lt;script src=&apos;filePath/myJSFile.js&apos;&gt;`</span><br><span class="line">    `&lt;script src=&apos;filePath/subComponent.js&apos;&gt;`</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div ng-controller=&apos;controllerName as ctrlName&apos;&gt;</span><br><span class="line">      &lt;input type=&apos;text&apos; ng-model=&apos;ctrlName.myGreeting&apos;     placeholder=&apos;Text here will display below&apos;&gt;</span><br><span class="line">      &lt;h1&gt;&#123;&#123;ctrlName.myGreeting&#125;&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;subComponent select=&apos;ctrlName.pickGreeting&apos; greetings=&apos;ctrlName.greetingsArray&apos;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;! html file of subComponent&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;li ng-repeat=&apos;eachGreeting in $ctrl.greetings&apos;&gt;&lt;/li&gt;</span><br><span class="line">&lt;a ng-click=&apos;$ctrl.select()&apos;&gt;Click here to Select&lt;/a&gt;</span><br></pre></td></tr></table></figure>
<h4 id="Step-1-用Properties和Methods建立一个Controller"><a href="#Step-1-用Properties和Methods建立一个Controller" class="headerlink" title="Step 1: 用Properties和Methods建立一个Controller"></a>Step 1: 用Properties和Methods建立一个Controller</h4><ul>
<li><p>使用一个文件名启动.js文件，以便于你的HTML文件能够和JS文件建立联系。</p>
</li>
<li><p>创建一个包含所有属性和函数（包括匿名函数）方法的控制器<code>controller</code>，这里所有的属性和函数方法都会在.html文件中被使用。如果你仅仅有由一个组件形成的.js文件或者是有多个子组件构成的.js文件似乎看上去控制器<code>controller</code>的设置有稍微的不同。我这里展示了一个多子组件结构的例子。</p>
</li>
</ul>
<h4 id="Step-2-初始化并且渲染页面"><a href="#Step-2-初始化并且渲染页面" class="headerlink" title="Step 2: 初始化并且渲染页面"></a>Step 2: 初始化并且渲染页面</h4><ul>
<li><p>初始化.html文件中的标签以及让页面中的angular生效。</p>
</li>
<li><p>插入一个<code>script</code>标签用来载入Angular库。</p>
</li>
<li><p>插入一个<code>script</code>标签用来连接包含所有控制器逻辑的.js文件。</p>
</li>
<li><p>在子组件文件中添加一个<code>templateURL</code>属性用来指明这个.html文件是否该被渲染。</p>
</li>
</ul>
<h4 id="Step-3-在Scope间传递变量"><a href="#Step-3-在Scope间传递变量" class="headerlink" title="Step 3: 在Scope间传递变量"></a>Step 3: 在Scope间传递变量</h4><ul>
<li><p>在控制器中属性和方法需要给定联系通过给一个或别的节点插入指令。</p>
</li>
<li><p>在任何元素中使用双括号来注入动态文本内容，通过HTML文件以及.js文件中的模型层的数据绑定。</p>
</li>
<li><p>在子组件之间传递参数需要在.js文件中绑定对象和在.html文件的节点上达成一种匹配。在一个.html文件中指定参数和方法将被传给另一个子组件文件中。在例子中，标记为<code>subComponent</code>将和控制器中的<code>pickGreeting</code>建立关联，在子组件中，指定数据被传递的方式。这个例子还包括了可迭代节点的一种绑定方式。这里有很多可被添加的指令的类型。甚至你可以定义自己的指令。</p>
</li>
</ul>
<h3 id="React"><a href="#React" class="headerlink" title="React"></a>React</h3><p>React使用<code>JSX</code>通过连接HTML和JS代码在一个单文件中来使得代码更具可读性。很多都说React其实只是MVC中的V层，但实际上在严格作用域规则下它确实仍然保持着数据和逻辑。React处理所有的数据和逻辑在一个单页文件中来创建组件并返回HTML代码进行页面渲染。可以看下如下的代码片段。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//.js file - stateless component</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var SubComponent = (props) =&gt; (</span><br><span class="line">  &lt;div&gt;&lt;h1&gt;First Item is still: &#123;props.myItem&#125;&lt;/h1&gt;&lt;/div&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//.js file - stateful component</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class ClassName extends React.Component &#123;</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props);</span><br><span class="line">    this.state = &#123;items: []&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onItemClick( ) &#123; </span><br><span class="line">    this.setState(&#123; </span><br><span class="line">      items: this.state.items.concat([&apos;hello&apos;]) </span><br><span class="line">    &#125;); </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> render () &#123; </span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;&lt;h1&gt;First Item: &#123;this.state.items[0]&#125;&lt;/h1&gt;</span><br><span class="line">      &lt;SubComponent myItem=&#123;this.state.items[0]&#125; /&gt;</span><br><span class="line">      &lt;li onClick=&#123;this.onItemClick.bind(this)&#125;&gt;Click to Add an Item</span><br><span class="line">      &lt;/li&gt;&lt;/div&gt;); </span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(&lt;ClassName propName=&#123;window.method&#125;, document.getElementById(&apos;appName&apos;));</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;! html file of component&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  `&lt;script src=&apos;https://fb.me/react-dom-0.14.6.js&apos;&gt;`&lt;/script&gt;</span><br><span class="line">  `&lt;script src=&apos;https://fb.me/react-with-addons-0.14.6.js&apos;&gt;`&lt;/script&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&apos;appName&apos;&gt;</span><br><span class="line">    &lt;h1&gt;My App&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  `&lt;script src=&apos;filePath/myJSFile_stateful.js&apos;&gt;`&lt;/script&gt;</span><br><span class="line">  `&lt;script src=&apos;filePath/myJSFile_stateless.js&apos;&gt;`&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<h4 id="Step-1-用Properties和Methods建立一个Controller-1"><a href="#Step-1-用Properties和Methods建立一个Controller-1" class="headerlink" title="Step 1: 用Properties和Methods建立一个Controller"></a>Step 1: 用Properties和Methods建立一个Controller</h4><ul>
<li><p>创建一个继承自<code>React component</code>的组件。它可是一个无状态的函数组件也可以是有状态类的组件，有状态类组件需要一个渲染方法。</p>
</li>
<li><p>关于组件的html代码块必须以匹配的标签开始和结束，因此我建议都以a开始和结束。</p>
</li>
</ul>
<h4 id="Step-2-初始化并且渲染页面-1"><a href="#Step-2-初始化并且渲染页面-1" class="headerlink" title="Step 2: 初始化并且渲染页面"></a>Step 2: 初始化并且渲染页面</h4><ul>
<li><p>引入两个<code>script</code>标签用来加载React库。你可以使用我例子中的也可以下载包并且在文件中引入路径。</p>
</li>
<li><p>引入一个<code>script</code>标签用来引入你自己包含了控制器逻辑和数据的.js文件。</p>
</li>
<li><p>在.js文件底部调用<code>ReactDOM</code>渲染方法并通过传递两个参数绑定节点和组件变量：第一个参数是一个在.js文件中创建的<code>class</code>标签用来传递全局作用域下的数据和方法，第二个参数是html中创建的<code>id</code>。</p>
</li>
</ul>
<h4 id="Step-3-在Scope间传递变量-1"><a href="#Step-3-在Scope间传递变量-1" class="headerlink" title="Step 3: 在Scope间传递变量"></a>Step 3: 在Scope间传递变量</h4><ul>
<li><p>通过关键词<code>props</code>来在程序间传递变量，它管理着组件和<code>model</code>层间的<code>scope</code>。对于一个无状态组件就像步骤一里描述的一样，对于一个有状态组件，利用构造器去调用<code>super()</code>为的是在父类中扩展构建方法和设置状态变量。如果你想在构造器中访问到<code>this</code>可以把<code>props</code>作为参数传递到父类。</p>
</li>
<li><p>在包含渲染方法的html代码中使用<code>state</code>去访问<code>state</code>变量。</p>
</li>
</ul>
<h4 id="Step-4-添加事件监听"><a href="#Step-4-添加事件监听" class="headerlink" title="Step 4: 添加事件监听"></a>Step 4: 添加事件监听</h4><ul>
<li><p>在类组件中创建函数方法去处理事件。</p>
</li>
<li><p>给HTML元素上添加事件处理函数，确保他们都绑定在了<code>this</code>上并且在运行时是你期望的效果。</p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/05/事件代理：模式还是反模式/" itemprop="url">
                  事件代理：模式还是反模式
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-08-05T00:00:00+08:00" content="2017-08-05">
              2017-08-05
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/web开发/" itemprop="url" rel="index">
                    <span itemprop="name">web开发</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/08/05/事件代理：模式还是反模式/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/08/05/事件代理：模式还是反模式/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://oe3sqmqy4.bkt.clouddn.com/blog-80.jpg" alt></p>
<blockquote>
<p>原文地址：<a href="https://www.sitepen.com/blog/2017/07/11/event-delegation-pattern-or-anti-pattern/" target="_blank" rel="noopener">Event Delegation: Pattern or Anti-Pattern?</a></p>
</blockquote>
<p>JavaScript toolkits和框架所做的大量工作，都集中于尝试修复、规范或优化浏览器的功能实现。此类工作需要做出许多假设，这些假设包括：问题是什么，开发人员将如何使用我们的工具，以及我们对未来的期望。</p>
<p>但这些假设经常是错误的，更有甚者，在很长一段时间内，这些选择可能貌似正确，直至某天我们被问题反咬一口。在这个无知的幸福时期当中，我们的工具包可能变得相当受欢迎，并成为大型复杂代码库的重要组成部分。</p>
<h3 id="事件冒泡与事件代理"><a href="#事件冒泡与事件代理" class="headerlink" title="事件冒泡与事件代理"></a>事件冒泡与事件代理</h3><p>事件冒泡允许源自子节点的事件向父级节点“冒泡”。这种行为导致JavaScript开发者使用松散的设计模式来识别我们所关心的接收事件的节点，通常使用 CSS 选择器，同时将事件监听器添加到该节点的父级节点上。</p>
<p>一旦这种模式进入工具包之中，设计API时须做出一些假设。在开始阶段，这些假设主要围绕性能与效率展开。</p>
<p>事件代理是处理事件的实际方法之一。然而这种方法论适用于所有项目吗？实际上，更好的问题可能是，每个工具包的所基于的假设是否与你的项目需求相符。要想知道某个API是否适合当下项目，就要了解这些工具是建立在哪些假设之上的，并且理解每个工具包如何解释它们。</p>
<h3 id="假设"><a href="#假设" class="headerlink" title="假设"></a>假设</h3><p>一起来看看，在思考如何有效管理DOM事件时可能会产生的一些假设。</p>
<h4 id="本机事件注册机制太慢"><a href="#本机事件注册机制太慢" class="headerlink" title="本机事件注册机制太慢"></a>本机事件注册机制太慢</h4><p>在你能够提出API存在的继发原因之前，不要创建新的API。随着浏览器厂商们对运行时的投入增加，你的功能实现总有一天会比原生实现慢。我所在的 SitePen有一个项目依赖于数组拼接速度。我们发现在某些情况下，手动操作索引和数组长度能够带来显著的性能提升。但我们无法定位到特定浏览器、浏览器版本或平台，因为无法进行运行时功能测试以确定我们的实现是否比原生API快。</p>
<h4 id="新的原生API不会出现"><a href="#新的原生API不会出现" class="headerlink" title="新的原生API不会出现"></a>新的原生API不会出现</h4><p>保持谨慎，确保已收集到足够的信息，可以降级使用原生实现，无论是已存在的，还是理想情况下可能存在的。这项工作的另一个名字叫“预防过时”（future proofing）。在某些情况下，你可能会使用必需参数超出绝对需要的API，但如果它能够保证轻松地过渡到更优秀的原生API，那么完全可以如此。一个很好的例子是最终获得原生支持的querySelectorAll API，之前许多开发人员假设这种事永远不会发生。</p>
<h4 id="不常见用例没有性能损失"><a href="#不常见用例没有性能损失" class="headerlink" title="不常见用例没有性能损失"></a>不常见用例没有性能损失</h4><p>事件代理可能会以数种方式呈现。例如两种特殊情况：大量节点上的少量事件，以及少数节点上的大量事件。如果针对其中之一进行优化，则可能会为另一个带来明显的瓶颈。虽然使用事件代理可能只需要向单个节点添加一个事件侦听器，但识别触发回调的节点的复杂方法对性能的影响可能不成比例。快速触发大量事件（例如鼠标移动或滚动事件）正是使用事件代理的场景。</p>
<h4 id="条件与背景"><a href="#条件与背景" class="headerlink" title="条件与背景"></a>条件与背景</h4><p>在考虑事件代理时，很容易认为我们只需要关心用户交互。这可能导致我们假设节点始终是文档的一部分，然后开始思考，为何不在document对象上添加单个事件处理程序呢？DOM事件并非总是用户交互的结果，我们也有人为事件、自定义事件以及加载事件等。如果想要监听的节点不在文档中，而监听器却绑定在document对象上，我们永远得不到通知。如果在API中无法区别监听器是添加到document上，抑或是添加到我们所传递的参数上，则能够理解为什么会出现这种情况。</p>
<h3 id="抽象"><a href="#抽象" class="headerlink" title="抽象"></a>抽象</h3><p>如果一个工具包提供一个仅用于支持代理的事件处理API，需要父级节点和标识子节点的选择器，则无法将事件监听器直接添加到某个节点。即使是使用CSS选择器，也引入了更高级的功能，可以轻松地使用另一种选择器语法或简单函数。</p>
<h4 id="不会发生副作用"><a href="#不会发生副作用" class="headerlink" title="不会发生副作用"></a>不会发生副作用</h4><p>如上所述，DOM事件冒泡是事件代理模式存在的前提。但是了解完整规范所涉及的内容之后，你会发现，事件冒泡是可以取消的。你的实现可能会将 stopPropagation 方法为空函数的自定义事件传递给回调函数；或者，你可能只会记录问题，并限制事件代理API的使用。这两种方法都有问题，但是如果你打算像为document对象事件处理程序那样工作，添加大量可取消的事件层可能放大副作用。</p>
<h4 id="不受时间影响"><a href="#不受时间影响" class="headerlink" title="不受时间影响"></a>不受时间影响</h4><p>一旦代码编写完成，很可能就会弃而不顾。但浏览器正在以我们无法想象、预测的方式向前发展，我们在编写代码时所做的假设可能会被证明是错误的，尽管我们尽了最大的努力。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>为什么要在项目中使用事件代理？</p>
<ul>
<li>原生实现太慢了吗？对现代浏览器来说不太可能。</li>
<li>是否有更好的API来执行事件代理？目前还没有如果你需要事件代理，这是一个很好的模式。</li>
<li>该工具包的性能优化是否符合项目需求？如果它专注于特殊情况，可能不会。</li>
<li>工具包的实现中有没有什么不适用于你的项目的内容？阅读文档，这些通常都会标出。</li>
<li>是否有副作用？遇到错误前你可能不会发现这一点，所以要特别注意。</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/30/JavaScript的那些奇技淫巧/" itemprop="url">
                  JavaScript的那些奇技淫巧
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-06-30T00:00:00+08:00" content="2017-06-30">
              2017-06-30
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/web开发/" itemprop="url" rel="index">
                    <span itemprop="name">web开发</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/06/30/JavaScript的那些奇技淫巧/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/06/30/JavaScript的那些奇技淫巧/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://oe3sqmqy4.bkt.clouddn.com/js.png" alt></p>
<h3 id="No1-柯里化-currying-与部分应用-partial-application"><a href="#No1-柯里化-currying-与部分应用-partial-application" class="headerlink" title="No1.柯里化(currying)与部分应用(partial application)"></a>No1.柯里化(currying)与部分应用(partial application)</h3><h5 id="柯里化-currying"><a href="#柯里化-currying" class="headerlink" title="柯里化(currying)"></a>柯里化(currying)</h5><p>柯里化是使一个函数</p>
<p>f: X * Y -&gt; R</p>
<p>转变为</p>
<p>f’: X -&gt; (Y -&gt; R)</p>
<p>与用两个参数调用f不同，我们用一个参数运行f’。返回的结果是一个函数，然后用第二个参数调用此函数，得到结果。</p>
<p>如此，如果未柯里化的函数f这样调用</p>
<p>f(3,5)</p>
<p>柯里化后的函数f’是这样调用的</p>
<p>f(3)(5)</p>
<p>比如: 未柯里化的函数add()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function add(x, y) &#123;</span><br><span class="line">  return x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">add(3, 5); // returns 8</span><br></pre></td></tr></table></figure>
<p>柯里化后的add()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function addC(x) &#123;</span><br><span class="line">  return function (y) &#123;</span><br><span class="line">    return x + y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">addC(3)(5); // returns 8</span><br></pre></td></tr></table></figure>
<h5 id="柯里化的规则"><a href="#柯里化的规则" class="headerlink" title="柯里化的规则"></a>柯里化的规则</h5><p>柯里化将一个二元函数，转变为一元函数，这个函数将返回另一个一元函数。</p>
<p>curry: (X × Y → R) → (X → (Y → R))</p>
<p>Javascript Code:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function curry(f) &#123;</span><br><span class="line">  return function(x) &#123;</span><br><span class="line">    return function(y) &#123;</span><br><span class="line">      return f(x, y);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="部分应用-partial-application"><a href="#部分应用-partial-application" class="headerlink" title="部分应用(partial application)"></a>部分应用(partial application)</h5><p>部分应用将一个函数</p>
<p>f: X * Y -&gt; R</p>
<p>的第一个参数固定而产生一个新的函数</p>
<p>f`: Y -&gt; R</p>
<p>f’与f不同，只需要填写第二个参数，这也是f’比f少一个参数的原因。</p>
<p>比如：将函数add的第一个参数绑定为5来产生函数plus5。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function plus5(y) &#123;</span><br><span class="line">  return 5 + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">plus5(3);  // returns 8</span><br></pre></td></tr></table></figure>
<h5 id="部分应用的规则"><a href="#部分应用的规则" class="headerlink" title="部分应用的规则"></a>部分应用的规则</h5><p>部分应用使用一个二元函数和一个值产生了一个一元函数。</p>
<p>partApply : ((X × Y → R) × X) → (Y → R)</p>
<p>Javascript Code:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function partApply(f, x) &#123;</span><br><span class="line">  return function(y) &#123;</span><br><span class="line">    return f(x, y);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="No2-优化嵌套的条件语句"><a href="#No2-优化嵌套的条件语句" class="headerlink" title="No2.优化嵌套的条件语句"></a>No2.优化嵌套的条件语句</h3><p>我们怎样来提高和优化javascript里嵌套的if语句呢？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">if (color) &#123;</span><br><span class="line">  if (color === &apos;black&apos;) &#123;</span><br><span class="line">    printBlackBackground();</span><br><span class="line">  &#125; else if (color === &apos;red&apos;) &#123;</span><br><span class="line">    printRedBackground();</span><br><span class="line">  &#125; else if (color === &apos;blue&apos;) &#123;</span><br><span class="line">    printBlueBackground();</span><br><span class="line">  &#125; else if (color === &apos;green&apos;) &#123;</span><br><span class="line">    printGreenBackground();</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    printYellowBackground();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>一种方法来提高嵌套的if语句是用switch语句。虽然它不那么啰嗦而且排列整齐，但是并不建议使用它，因为这对于调试错误很困难。这告诉你为什么。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">switch(color) &#123;</span><br><span class="line">  case &apos;black&apos;:</span><br><span class="line">    printBlackBackground();</span><br><span class="line">    break;</span><br><span class="line">  case &apos;red&apos;:</span><br><span class="line">    printRedBackground();</span><br><span class="line">    break;</span><br><span class="line">  case &apos;blue&apos;:</span><br><span class="line">    printBlueBackground();</span><br><span class="line">    break;</span><br><span class="line">  case &apos;green&apos;:</span><br><span class="line">    printGreenBackground();</span><br><span class="line">    break;</span><br><span class="line">  default:</span><br><span class="line">    printYellowBackground();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果可以重构的话，我们可以试着简化函数。比如不需要为每个颜色写一个函数，而是将颜色作为函数的参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function printBackground(color) &#123;</span><br><span class="line">  if (!color || typeof color !== &apos;string&apos;) &#123;</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是如果不能重构的话，我们必须避免过多的条件检查，避免过多使用switch。我们必须考虑最有效率的方法，使用object。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let colorObj = &#123;</span><br><span class="line">  &apos;black&apos;: printBlackBackground,</span><br><span class="line">  &apos;red&apos;: printRedBackground,</span><br><span class="line">  &apos;blue&apos;: printBlueBackground,</span><br><span class="line">  &apos;green&apos;: printGreenBackground,</span><br><span class="line">  &apos;yellow&apos;: printYellowBackground</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if (color in colorObj) &#123;</span><br><span class="line">  colorObj[color]();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="No3-运用存储加速递归"><a href="#No3-运用存储加速递归" class="headerlink" title="No3.运用存储加速递归"></a>No3.运用存储加速递归</h3><p>大家对斐波那契(Fibonacci)数列都很熟悉。我们可以再20秒内写出下面这样一个方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var fibonacci = function(n)&#123;</span><br><span class="line">  return n &lt; 2 ? n : fibonacci(n-1) + fibonacci(n-2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>它可以运行，但并不高效。它做了太多重复的运算，我们可以通过存储这些运算结果来使其加速。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var fibonacci = (function() &#123;</span><br><span class="line">  var cache = [0, 1]; // cache the value at the n index</span><br><span class="line">  return function(n) &#123;</span><br><span class="line">    if (cache[n] === undefined) &#123;</span><br><span class="line">      for (var i = cache.length; i &lt;= n; ++i) &#123;</span><br><span class="line">        cache[i] = cache[i-1] + cache[i-2];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return cache[n];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p>我们也可以定义一个高阶函数，它接收一个方法作为参数，返回一个该方法运用存储后的新方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var memoize = function(func)&#123;</span><br><span class="line">    var cache = &#123;&#125;;</span><br><span class="line">    return function()&#123;</span><br><span class="line">        var key = Array.prototype.slice.call(arguments).toString();</span><br><span class="line">        return key in cache ? cache[key] : (cache[key] = func.apply(this,arguments));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">fibonacci = memoize(fibonacci);</span><br></pre></td></tr></table></figure>
<p>ES6版本的memoize函数如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var memoize = function(func)&#123;</span><br><span class="line">    const cache = &#123;&#125;;</span><br><span class="line">    return (...args) =&gt; &#123;</span><br><span class="line">        const key = [...args].toString();</span><br><span class="line">        return key in cache ? cache[key] : (cache[key] = func(...args));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">fibonacci = memoize(fibonacci);</span><br></pre></td></tr></table></figure>
<p>我们可以将memoize()用在很多其他地方</p>
<ul>
<li>GCD(最大公约数)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var gcd = memoize(function(a,b)&#123;</span><br><span class="line">    var t;</span><br><span class="line">    if (a &lt; b) t=b, b=a, a=t;</span><br><span class="line">    while(b != 0) t=b, b = a%b, a=t;</span><br><span class="line">    return a;</span><br><span class="line">&#125;)</span><br><span class="line">gcd(27,183); //=&gt; 3</span><br></pre></td></tr></table></figure>
<ul>
<li>阶乘运算</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var factorial = memoize(function(n) &#123;</span><br><span class="line">    return (n &lt;= 1) ? 1 : n * factorial(n-1);</span><br><span class="line">&#125;)</span><br><span class="line">factorial(5); //=&gt; 120</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Original：<a href="http://www.jstips.co/" target="_blank" rel="noopener">http://www.jstips.co/</a></p>
</blockquote>
<p>如果想关注最新技术，请关注微信公众号：AutoHome车服务前端团队</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/12/6个字符的JavaScript之旅/" itemprop="url">
                  6个字符的JavaScript之旅
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-05-12T00:00:00+08:00" content="2017-05-12">
              2017-05-12
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/web开发/" itemprop="url" rel="index">
                    <span itemprop="name">web开发</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/05/12/6个字符的JavaScript之旅/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/12/6个字符的JavaScript之旅/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://oe3sqmqy4.bkt.clouddn.com/sdasda.png" alt></p>
<blockquote>
<p>原文地址：<a href="http://www.jazcash.com/a-javascript-journey-with-only-six-characters" target="_blank" rel="noopener">http://www.jazcash.com/a-javascript-journey-with-only-six-characters</a></p>
</blockquote>
<p>JavaScript是一门奇妙而且有趣的语言，它可以让我们写一些疯狂但仍然有效合理的代码，它试图通过把事情转换到基于我们如何对待他们的特定类型上来帮助我们。</p>
<p>如果我们添加一个字符串，它会假定我们希望是文本形式表示，所以它将为我们转换成一个字符串。</p>
<p>如果我们添加一个加号或者是减号前缀，它会假定我们希望是数值形式呈现，如果可能的话那么就会为我们把一个字符串转换成数字。</p>
<p>如果我们添加一个否定符号，它会将字符串转换为一个布尔值。</p>
<p>我们可以用Javascript中的<code>[</code>，<code>]</code>，<code>(</code>，<code>)</code>，<code>!</code> and<code>+</code>这六个符号写一些神奇的代码。</p>
<p>如果你现在不是在移动设备上，你可以打开你浏览器的JS控制台跟着下面的步骤一起操作，你可以将任何示例代码拷贝粘贴到JS控制台，并且代码值应该都为true。</p>
<p>让我们从最基础的开始，记住一些黄金规则:</p>
<ol>
<li><p>前面加<code>!</code>会被转换成布尔值</p>
</li>
<li><p>前面加<code>+</code>会被转换成数值</p>
</li>
<li><p>添加<code>[]</code>会被转换成字符串</p>
</li>
</ol>
<p>这里他们是相等的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">![] === false</span><br><span class="line"></span><br><span class="line">+[] === 0</span><br><span class="line"></span><br><span class="line">[]+[] === &quot;&quot;</span><br></pre></td></tr></table></figure>
<p>另一件事你应该知道的是,它可以从字符串使用方括号检索特定的字母：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;hello&quot;[0] === &quot;h&quot;</span><br></pre></td></tr></table></figure>
<p>还可以使多个数字通过添加字符串表示在一起,然后把整个表达式转换成一个数字：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+(&quot;1&quot; + &quot;1&quot;) === 11</span><br></pre></td></tr></table></figure>
<p>好的，接下来让我们把一些东西结合在一起最后得到字母<code>a</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">![] === false</span><br><span class="line"></span><br><span class="line">![]+[] === &quot;false&quot;</span><br><span class="line"></span><br><span class="line">+!![] === 1</span><br><span class="line"></span><br><span class="line">---------------------------------------------</span><br><span class="line"></span><br><span class="line">(![]+[])[+!![]] === &quot;a&quot;  // same as &quot;false&quot;[1]</span><br></pre></td></tr></table></figure>
<p>我们可以通过<code>true</code>和<code>false</code>得到相似的字母<code>a</code>，<code>e</code>，<code>f</code>，<code>l</code>，<code>r</code>，<code>s</code>，<code>t</code>，<code>u</code>。那么我们可以从其他地方得到字母吗？</p>
<p>我们可以通过一些特别的式子像<code>[]</code>、<code>[[]]</code>得到<code>undefined</code>，用我们上面的黄金法则得到另外的字母<code>d</code>，<code>i</code>和<code>n</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[][[]] + [] === &quot;undefined&quot;</span><br></pre></td></tr></table></figure>
<p>到目前为止我们获得的所有字母，我们可以拼<code>fill</code>，<code>filter</code>和<code>find</code>。当然我们也可以拼一些其他的单词，这些单词最重要的是他们都是<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array#Mutator_methods" target="_blank" rel="noopener">Array methods</a>。这也就意味着他们是<code>Array</code>对象的一部分，可以直接调用数组实例（如<code>[2,1].sort()</code>）。</p>
<p>现在了解另一件重要的JS的特性是一个对象的属性可以通过点符号<code>.</code>或方括号<code>[]</code>访问。上述数组方法是数组对象本身的属性，我们可以使用方括号代替点符号调用这些方法。</p>
<p>所以<code>[2,1][&quot;sort&quot;]()</code>等价于<code>[2,1].sort()</code>。</p>
<p>让我们继续看看到底发生了什么当试图使用一个数组的方法的时候，可以使用到目前为止拼写的但没有调用过的字母。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[][&quot;fill&quot;]</span><br></pre></td></tr></table></figure>
<p>得到<code>function fill() { [native code] }</code>，可以使用我们的黄金法则把这个方法头作为一个字符串。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[][&quot;fill&quot;]+[] === &quot;function fill() &#123; [native code] &#125;&quot;</span><br></pre></td></tr></table></figure>
<p>现在我们又得到le其他的字符：<code>c</code>，<code>o</code>，<code>v</code>，<code>(</code>，<code>)</code>，<code>{</code>，<code>[</code>，<code>]</code>，<code>}</code>。</p>
<p>新得到的<code>c</code>和<code>o</code>现在可以形成    <code>constructor</code>这个单词了，到目前为止我们已经处理的对象可以得到它用字符串表示的构造器函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">true[&quot;constructor&quot;] + [] === &quot;function Boolean()&#123; [native code] &#125;&quot;</span><br><span class="line"></span><br><span class="line">0[&quot;constructor&quot;] + []    === &quot;function Number() &#123; [native code] &#125;&quot;</span><br><span class="line"></span><br><span class="line">&quot;&quot;[&quot;constructor&quot;] + []   === &quot;function String() &#123; [native code] &#125;&quot;</span><br><span class="line"></span><br><span class="line">[][&quot;constructor&quot;] + []   === &quot;function Array() &#123; [native code] &#125;&quot;</span><br></pre></td></tr></table></figure>
<p><code>Number</code>类型的<code>toString</code>方法有一个称为<code>radix</code>(“基数”)的秘密的论点。它可以将数值在转换为一个字符串之前先经过基数换算。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(12)[&quot;toString&quot;](10) === &quot;12&quot; // base 10 - normal to us</span><br><span class="line"></span><br><span class="line">(12)[&quot;toString&quot;](2) === &quot;1100&quot; // base 2, or binary, for 12</span><br><span class="line"></span><br><span class="line">(12)[&quot;toString&quot;](8) === &quot;14&quot; // base 8 (octonary) for 12</span><br><span class="line"></span><br><span class="line">(12)[&quot;toString&quot;](16) === &quot;c&quot; // hex for 12</span><br></pre></td></tr></table></figure>
<p>但是为什么基数只写到16？最大值是36包括所有的字符<code>0</code>-<code>9</code>和<code>a</code>-<code>z</code>，因此现在我们可以得到任何我们想要的字符。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(10)[&quot;toString&quot;](36) === &quot;a&quot;</span><br><span class="line"></span><br><span class="line">(35)[&quot;toString&quot;](36) === &quot;z&quot;</span><br></pre></td></tr></table></figure>
<p>棒极了！但是其它字符如标点符号和大写字母如何呢？让我们继续接着往下深入研究。</p>
<p>这一点依赖于你的js正在运行在什么地方，它可能会或可能不会访问特定的预定义的对象或数据。如果你的JS运行在浏览器中，那么你可以访问到一些保留的<a href="https://developer.mozilla.org/en-US/docs/tag/HTML%20wrapper%20methods" target="_blank" rel="noopener">HTML wrapper methods</a>。</p>
<p>比如，<code>bold</code>是用一个用<code>b</code>标签包裹字符串的字符串方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;test&quot;[&quot;bold&quot;]() === &quot;&lt;b&gt;test&lt;/b&gt;&quot;</span><br></pre></td></tr></table></figure>
<p>这样我们也能够得到字符<code>&lt;</code>，<code>&gt;</code>and<code>/</code>。</p>
<p>你或许已经听说过<code>escape</code>方法。它主要是将一个字符串转换为一个URI友好的格式，这样可以让浏览器解释编译。这个方法是我们研究的一个重要部分，因此我们要去探究它。我们可以拼写它但是如何真正执行它呢？它不是一个属于我们到目前为止处理过的任何类型的函数，实际上它是一个全局函数。</p>
<p>任意一个函数的构造器是什么样的？</p>
<p>答案是<code>function Function() { [native code] }</code>，它本身是一个函数对象。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[][&quot;fill&quot;][&quot;constructor&quot;] === Function</span><br></pre></td></tr></table></figure>
<p>用这个方法我们可以给函数传递一个字符串代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Function(&quot;alert(&apos;test&apos;)&quot;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Function anonymous() &#123;  </span><br><span class="line">    alert(&apos;test&apos;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在我们可以像这样使用我们的<code>escape</code>方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[][&quot;fill&quot;][&quot;constructor&quot;](&quot;return escape(&apos; &apos;)&quot;)() === &quot;%20&quot;</span><br></pre></td></tr></table></figure>
<p>如果我们想得到我们忘记的其他字符大写<code>C</code>是很重要的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[][&quot;fill&quot;][&quot;constructor&quot;](&quot;return escape(&apos;&lt;&apos;)&quot;)()[2] === &quot;C&quot;</span><br></pre></td></tr></table></figure>
<p>用这个方法我们现在可以写一个<code>fromCharCode</code>方法，它可以将一个给定的十进制表示的数返回成一个    <code>Unicode</code>字符。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;[&quot;constructor&quot;][&quot;fromCharCode&quot;](65) === &quot;A&quot;</span><br><span class="line"></span><br><span class="line">&quot;&quot;[&quot;constructor&quot;][&quot;fromCharCode&quot;](46) === &quot;.&quot;</span><br></pre></td></tr></table></figure>
<p>我们可以使用<a href="http://unicodelookup.com/" target="_blank" rel="noopener">Unicode lookup</a>去找到一个任意字符用十进制表示的数。</p>
<h4 id="为什么它是有用的呢？"><a href="#为什么它是有用的呢？" class="headerlink" title="为什么它是有用的呢？"></a>为什么它是有用的呢？</h4><p>eBay不久前做了一些<a href="http://arstechnica.co.uk/security/2016/02/ebay-has-no-plans-to-fix-severe-bug-that-allows-malware-distribution/" target="_blank" rel="noopener">bad things</a>，他们允许商家使用这些字符执行JS在页面中。但这是一个很少见的攻击量。一些人提到了混淆，但实际上有更好的混淆方式。</p>
<p>Sources:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/JSFuck" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/JSFuck</a></li>
<li><a href="https://esolangs.org/wiki/JSFuck" target="_blank" rel="noopener">https://esolangs.org/wiki/JSFuck</a></li>
<li><a href="https://github.com/aemkei/jsfuck" target="_blank" rel="noopener">https://github.com/aemkei/jsfuck</a></li>
<li><a href="http://patriciopalladino.com/blog/2012/08/09/non-alphanumeric-javascript.html" target="_blank" rel="noopener">http://patriciopalladino.com/blog/2012/08/09/non-alphanumeric-javascript.html</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/14/Axios：基于Promise的HTTP库/" itemprop="url">
                  Axios：基于Promise的HTTP库
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-04-14T00:00:00+08:00" content="2017-04-14">
              2017-04-14
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/web开发/" itemprop="url" rel="index">
                    <span itemprop="name">web开发</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/04/14/Axios：基于Promise的HTTP库/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/04/14/Axios：基于Promise的HTTP库/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://oe3sqmqy4.bkt.clouddn.com/bg111.png" alt></p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>在Vue1.0中我们知道和服务端通信发送请求获取数据依赖的是vue-resource，但自Vue更新到2.0之后，作者就宣告不再对vue-resource更新，而是改成了推荐的Axios这一HTTP库。作用上类似我们熟知的一些Ajax库，但是Axios是基于Promise的HTTP请求客户端，可同时在浏览器和Node.js中使用，这好像更符合目前前端的技术新趋势。现将Axios的官方文档及示例做一介绍。</p>
<h4 id="实现的功能特点"><a href="#实现的功能特点" class="headerlink" title="实现的功能特点"></a>实现的功能特点</h4><ul>
<li>可以从浏览器端发起XMLHttpRequests请求</li>
<li>node端发起http请求</li>
<li>支持Promise API</li>
<li>监听请求和响应</li>
<li>转化请求和返回响应数据</li>
<li>取消请求</li>
<li>JSON数据自动转化</li>
<li>客户端支持防御<a href="https://en.wikipedia.org/wiki/Cross-site_request_forgery" target="_blank" rel="noopener">CSRF</a>攻击</li>
</ul>
<h4 id="浏览器支持"><a href="#浏览器支持" class="headerlink" title="浏览器支持"></a>浏览器支持</h4><table>
<thead>
<tr>
<th><img src="https://raw.github.com/alrra/browser-logos/master/src/chrome/chrome_48x48.png" alt="Chrome"></th>
<th><img src="https://raw.github.com/alrra/browser-logos/master/src/firefox/firefox_48x48.png" alt="Firefox"></th>
<th><img src="https://raw.github.com/alrra/browser-logos/master/src/safari/safari_48x48.png" alt="Safari"></th>
<th><img src="https://raw.github.com/alrra/browser-logos/master/src/opera/opera_48x48.png" alt="Opera"></th>
<th><img src="https://raw.github.com/alrra/browser-logos/master/src/edge/edge_48x48.png" alt="Edge"></th>
<th><img src="https://raw.github.com/alrra/browser-logos/master/src/archive/internet-explorer_9-11/internet-explorer_9-11_48x48.png" alt="IE"></th>
</tr>
</thead>
<tbody>
<tr>
<td>Latest ✔</td>
<td>Latest ✔</td>
<td>Latest ✔</td>
<td>Latest ✔</td>
<td>Latest ✔</td>
<td>8+ ✔</td>
<td></td>
</tr>
</tbody>
</table>
<p><a href="https://saucelabs.com/u/axios" target="_blank" rel="noopener"><img src="https://saucelabs.com/open_sauce/build_matrix/axios.svg" alt="Browser Matrix"></a></p>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><h5 id="使用npm"><a href="#使用npm" class="headerlink" title="使用npm"></a>使用npm</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install axios</span><br></pre></td></tr></table></figure>
<h5 id="使用bower"><a href="#使用bower" class="headerlink" title="使用bower"></a>使用bower</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bower install axios</span><br></pre></td></tr></table></figure>
<h5 id="使用CDN"><a href="#使用CDN" class="headerlink" title="使用CDN"></a>使用CDN</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://unpkg.com/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><h5 id="发起一个GET请求"><a href="#发起一个GET请求" class="headerlink" title="发起一个GET请求"></a>发起一个GET请求</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 发起一个user请求</span><br><span class="line">axios.get(&apos;/user?ID=1234&apos;)</span><br><span class="line">.then(function(respone) &#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(function(error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 上面的请求也可选择下面的方式来写</span><br><span class="line">axios.get(&apos;/user&apos;,&#123;</span><br><span class="line">    params:&#123;</span><br><span class="line">        ID:12345</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.then(function(response)&#123;</span><br><span class="line">    console.log(response);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(function(error)&#123;</span><br><span class="line">    console.log(error)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="发起一个POST请求"><a href="#发起一个POST请求" class="headerlink" title="发起一个POST请求"></a>发起一个POST请求</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios.post(&apos;/user&apos;, &#123;</span><br><span class="line">    firstName: &apos;Fred&apos;,</span><br><span class="line">    lastName: &apos;Flintstone&apos;</span><br><span class="line">&#125;)</span><br><span class="line">.then(function (response) &#123;</span><br><span class="line">  	console.log(response);</span><br><span class="line">&#125;)</span><br><span class="line">.catch(function (error) &#123;</span><br><span class="line">    console.log(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="发起一个多重并发请求"><a href="#发起一个多重并发请求" class="headerlink" title="发起一个多重并发请求"></a>发起一个多重并发请求</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function getUserAccount() &#123;</span><br><span class="line">    return axios.get(&apos;/user/12345&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function getUserPermissions() &#123;</span><br><span class="line">    return axios.get(&apos;/user/12345/permissions&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.all([getUerAccount(),getUserPermissions()])</span><br><span class="line">.then(axios.spread(function(acc,pers)&#123;</span><br><span class="line">    // 两个请求现在都完成</span><br><span class="line">	// TODO</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>
<h3 id="Axios-API"><a href="#Axios-API" class="headerlink" title="Axios API"></a>Axios API</h3><p>axios能够在进行请求时进行一些设置。</p>
<p><strong>axios(config)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 发起POST请求</span><br><span class="line">axios(&#123;</span><br><span class="line">    method: &apos;post&apos;,</span><br><span class="line">    url: &apos;/user/12345&apos;,</span><br><span class="line">    data:&#123;</span><br><span class="line">        firstName:&apos;Fred&apos;,</span><br><span class="line">        lastName:&apos;Flintstone&apos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 请求远程服务的一张图片</span><br><span class="line">axios(&#123;</span><br><span class="line">  method: &apos;get&apos;,</span><br><span class="line">  url: &apos;http://bit.ly/2mTM3nY&apos;,</span><br><span class="line">  responseType: &apos;stream&apos;</span><br><span class="line">&#125;)</span><br><span class="line">.then(function(response) &#123;</span><br><span class="line">    response.data.pipe(fs.createWriteStream(&apos;ada_lovelace.jpg&apos;))</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>axios(url[, config])</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 发起一个GET请求</span><br><span class="line">axios(&apos;/user/12345/);</span><br></pre></td></tr></table></figure>
<h3 id="请求方法别名"><a href="#请求方法别名" class="headerlink" title="请求方法别名"></a>请求方法别名</h3><p>为了方便axios提供了所有请求方法的别名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.request(config)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.get(url[, config])</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.delete(url[, config])</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.head(url[, config])</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.options(url[, config])</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.post(url[, data[, config]])</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.put(url[, data[, config]])</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.patch(url[, data[, config]])</span><br></pre></td></tr></table></figure>
<h5 id="并发"><a href="#并发" class="headerlink" title="并发"></a>并发</h5><p>处理并发请求有用的方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.all(iterable)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.spread(callback)</span><br></pre></td></tr></table></figure>
<h4 id="创建一个实例"><a href="#创建一个实例" class="headerlink" title="创建一个实例"></a>创建一个实例</h4><p>你可以使用自定义设置创建一个新的实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.create([config])</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var instance = axios.create(&#123;</span><br><span class="line">  baseURL: &apos;https://some-domain.com/api/&apos;,</span><br><span class="line">  timeout: 1000,</span><br><span class="line">  headers: &#123;&apos;X-Custom-Header&apos;: &apos;foobar&apos;&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="请求配置"><a href="#请求配置" class="headerlink" title="请求配置"></a>请求配置</h3><p>以下列出了一些请求时的设置。只有url是必须的，如果没有指明的话，默认的请求方法是GET。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    // url 是服务器链接接口地址</span><br><span class="line">    url: &apos;/user&apos;,</span><br><span class="line"></span><br><span class="line">    // method 是发起请求时的请求方法</span><br><span class="line">    method: &apos;get&apos;,</span><br><span class="line"></span><br><span class="line">    // baseURL 如果url不是绝对地址，那么将会加在其前面</span><br><span class="line">    // 当axios使用相对地址时这个设置非常方便</span><br><span class="line">    // 在其实例中的方法</span><br><span class="line">    baseURL: &apos;http://some-domain.com/api/&apos;,</span><br><span class="line"></span><br><span class="line">    // transformRequest 允许请求的数据在传到服务器之前进行转化</span><br><span class="line">    // 这个只适用于PUT,GET,PATCH方法</span><br><span class="line">    // 数组中的最后一个函数必须返回一个字符串，一个ArrayBuffer，或者Stream</span><br><span class="line">    transformRequest: [function(data) &#123;</span><br><span class="line">        // 依自己的需求对请求数据进行处理</span><br><span class="line">        return data;</span><br><span class="line">    &#125;],</span><br><span class="line"></span><br><span class="line">    // transformResponse 允许返回的数据传入then/catch之前进行处理</span><br><span class="line">    transformResponse: [function(data) &#123;</span><br><span class="line">        // 依需要对数据进行处理</span><br><span class="line">        return data;</span><br><span class="line">    &#125;],</span><br><span class="line"></span><br><span class="line">    // headers 是自定义的要被发送的头信息</span><br><span class="line">    headers: &#123;&apos;X-Requested-with&apos;: &apos;XMLHttpRequest&apos;&#125;,</span><br><span class="line"></span><br><span class="line">    // params是请求连接中的请求参数，必须是一个纯对象，或者URLSearchParams对象</span><br><span class="line">    params: &#123;</span><br><span class="line">        ID: 12345</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    // paramsSerializer 是一个可选的函数，是用来序列化参数</span><br><span class="line">    // 例如：（https://ww.npmjs.com/package/qs,http://api.jquery.com/jquery.param/)</span><br><span class="line">    paramsSerializer: function(params) &#123;</span><br><span class="line">        return Qs.stringify(params,&#123;arrayFormat: &apos;brackets&apos;&#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // data 是请求体需要设置的数据</span><br><span class="line">    // 只适用于应用的PUT，POST，PATCH请求方法</span><br><span class="line">    // 当没有设置transformRequest时，必须是以下其中之一的类型：</span><br><span class="line">    // -string,plain object,ArrayBuffer,ArrayBufferView,URLSearchParams</span><br><span class="line">    // -仅浏览器：FormData,File,Blob</span><br><span class="line">    // -仅Node：Stream</span><br><span class="line">    data: &#123;</span><br><span class="line">        firstName: &apos;fred&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    // timeout 定义请求的时间，单位是毫秒。</span><br><span class="line">    // 如果请求的时间超过这个设定时间，请求将会停止</span><br><span class="line">    timeout: 1000,</span><br><span class="line">    </span><br><span class="line">    // withCredentials 表明是否跨域请求，</span><br><span class="line">    // 应该是用证书</span><br><span class="line">    withCredentials: false // 默认值</span><br><span class="line"></span><br><span class="line">    // adapter 适配器，允许自定义处理请求，这会使测试更简单</span><br><span class="line">    // 返回一个promise，并且提供验证返回</span><br><span class="line">    adapter: function(config) &#123;</span><br><span class="line">		</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // auth 表明HTTP基础的认证应该被使用，并且提供证书</span><br><span class="line">    // 这个会设置一个authorization头（header），并且覆盖你在header设置的Authorization头信息</span><br><span class="line">    auth: &#123;</span><br><span class="line">        username: &apos;janedoe&apos;,</span><br><span class="line">        password: &apos;s00pers3cret&apos;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // responsetype 表明服务器返回的数据类型，这些类型的设置应该是：</span><br><span class="line">    //&apos;arraybuffer&apos;,&apos;blob&apos;,&apos;document&apos;,&apos;json&apos;,&apos;text&apos;,stream&apos;</span><br><span class="line">    responsetype: &apos;json&apos;,</span><br><span class="line"></span><br><span class="line">    // xsrfHeaderName 是http头（header）的名字，并且该头携带xsrf的值</span><br><span class="line">    xrsfHeadername: &apos;X-XSRF-TOKEN&apos;，// 默认值</span><br><span class="line"></span><br><span class="line">    // onUploadProgress允许处理上传过程的事件</span><br><span class="line">    onUploadProgress: function(progressEvent)&#123;</span><br><span class="line">        //本地过程事件发生时想做的事</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    //`onDownloadProgress`允许处理下载过程的事件</span><br><span class="line">    onDownloadProgress: function(progressEvent) &#123;</span><br><span class="line">        // 下载过程中想做的事</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // maxContentLength 定义http返回内容的最大容量</span><br><span class="line">    maxContentLength: 2000,</span><br><span class="line"></span><br><span class="line">    // validateStatus 定义promise的resolve和reject</span><br><span class="line">    // http返回状态码，如果validateStatus返回true（或者设置成null/undefined），promise将会接受；其他的promise将会拒绝。</span><br><span class="line">    validateStatus: function(status) &#123;</span><br><span class="line">        return status &gt;= 200 &amp;&amp; stauts &lt; 300; // 默认</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // httpAgent和httpsAgent当产生一个http或者https请求时分别定义一个自定义的代理，在nodejs中。</span><br><span class="line">    // 这个允许设置一些选选个，像是`keepAlive`--这个在默认中是没有开启的。</span><br><span class="line">    httpAgent: new http.Agent(&#123;keepAlive: treu&#125;),</span><br><span class="line">    httpsAgent: new https.Agent(&#123;keepAlive: true&#125;),</span><br><span class="line"></span><br><span class="line">    // proxy 定义服务器的主机名字和端口号</span><br><span class="line">    // auth表明HTTP基本认证应该跟proxy相连接，并且提供证书</span><br><span class="line">    // 这个将设置一个&apos;Proxy-Authorization&apos;头(header)，覆盖原先自定义的</span><br><span class="line">    proxy: &#123;</span><br><span class="line">        host: 127.0.0.1,</span><br><span class="line">        port: 9000,</span><br><span class="line">        auth: &#123;</span><br><span class="line">            username: &apos;cdd&apos;,</span><br><span class="line">            password: &apos;123456&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // cancelTaken定义一个取消，能够用来取消请求</span><br><span class="line">    //（查看下面的Cancellation的详细部分）</span><br><span class="line">    cancelToke: new CancelToken(function(cancel) &#123;</span><br><span class="line">    </span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="响应概要"><a href="#响应概要" class="headerlink" title="响应概要"></a>响应概要</h3><p>一个请求的响应包含以下信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    // data是服务器的提供的返回值</span><br><span class="line">    data: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">    // status是服务器返回的http状态码</span><br><span class="line">    status: 200,</span><br><span class="line"></span><br><span class="line">    // statusText是服务器返回的http状态信息</span><br><span class="line">    statusText: &apos;ok&apos;,</span><br><span class="line"></span><br><span class="line">    // headers是服务器返回中携带的headers</span><br><span class="line">    headers: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">    // config是对axios进行的设置，目的是为了请求</span><br><span class="line">    config: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果你使用<strong>then</strong>，你将获取到以下响应返回结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&apos;/user/12345&apos;)</span><br><span class="line">  .then(function(response) &#123;</span><br><span class="line">    console.log(response.data);</span><br><span class="line">    console.log(response.status);</span><br><span class="line">    console.log(response.statusText);</span><br><span class="line">    console.log(response.headers);</span><br><span class="line">    console.log(response.config);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<p>使用catch时，或者传入一个reject callback作为then的第二个参数，那么返回的错误信息将能够被使用。</p>
<h4 id="默认设置"><a href="#默认设置" class="headerlink" title="默认设置"></a>默认设置</h4><p>你可以设置一个默认的设置将在所有的请求中有效。</p>
<h6 id="全局默认设置："><a href="#全局默认设置：" class="headerlink" title="全局默认设置："></a>全局默认设置：</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.baseURL = &apos;https://api.example.com&apos;;</span><br><span class="line">axios.defaults.headers.common[&apos;Authorization&apos;] = AUTH_TOKEN;</span><br><span class="line">axios.defaults.headers.post[&apos;Content-Type&apos;] = &apos;application/x-www-form-urlencoded&apos;;</span><br></pre></td></tr></table></figure>
<h6 id="实例中自定义默认值"><a href="#实例中自定义默认值" class="headerlink" title="实例中自定义默认值"></a>实例中自定义默认值</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 当创建一个实例时进行默认设置</span><br><span class="line">var instance = axios.create(&#123;</span><br><span class="line">    baseURL: &apos;https://api.example.com&apos;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 在实例创建之后改变默认值</span><br><span class="line">instance.defaults.headers.common[&apos;Authorization&apos;] = AUTH_TOKEN;</span><br></pre></td></tr></table></figure>
<h6 id="设置优先级"><a href="#设置优先级" class="headerlink" title="设置优先级"></a>设置优先级</h6><p>设置(config)将按照优先顺序整合起来。首先的是在 lib/defaults.js 中定义的默认设置，其次是 defaults 实例属性的设置，最后是请求中 config 参数的设置。越往后面的等级越高，会覆盖前面的设置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 使用默认库的设置创建一个实例，</span><br><span class="line">// 这个实例中使用的是默认库的timeout设置，默认值是0。</span><br><span class="line">var instance = axios.create();</span><br><span class="line"></span><br><span class="line">// 覆盖默认库中timeout的默认值</span><br><span class="line">// 此时所有的请求的timeout时间是2.5秒</span><br><span class="line">instance.defaults.timeout = 2500;</span><br><span class="line"></span><br><span class="line">// 覆盖该次请求中timeout的值，这个值设置的时间更长一些</span><br><span class="line">instance.get(&apos;/longRequest&apos;,&#123;</span><br><span class="line">    timeout: 5000</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h6 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h6><p>你可以在requests或者responses被then或者catch处理之前对他们进行拦截</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 添加一个请求拦截器</span><br><span class="line">axios.interceptors.request.use(function(config) &#123;</span><br><span class="line">    // 在请求发送之前</span><br><span class="line">    // TODO</span><br><span class="line">    return config;</span><br><span class="line">&#125;,function(error) &#123;</span><br><span class="line">    // 当出现请求错误</span><br><span class="line">    // TODO</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 添加一个返回拦截器</span><br><span class="line">axios.interceptors.response.use(function(response) &#123;</span><br><span class="line">    // 对返回的数据进行处理</span><br><span class="line">    // TODO</span><br><span class="line">    return response;</span><br><span class="line">&#125;,function(error) &#123;</span><br><span class="line">    // 对返回的错误进行处理</span><br><span class="line">    //TODO</span><br><span class="line">    return Promise.reject(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>如果你需要在稍后移除拦截器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var myInterceptor = axios.interceptors.request.use(function()&#123;/*...*/&#125;);</span><br><span class="line">axios.interceptors.rquest.eject(myInterceptor);</span><br></pre></td></tr></table></figure>
<p>你可以在一个axios实例中使用拦截器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var instance = axios.create();</span><br><span class="line">instance.interceptors.request.use(function()&#123;/*...*/&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&apos;user/12345&apos;)</span><br><span class="line">.catch(function(error) &#123;</span><br><span class="line">    if (error.response) &#123;</span><br><span class="line">        console.log(error.response.data);</span><br><span class="line">        console.log(error.response.status);</span><br><span class="line">        console.log(error.response.headers);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        // 一些错误是在设置请求时触发的</span><br><span class="line">        console.log(&apos;Error&apos;, error.message);</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(error.config);</span><br><span class="line">&#125;);</span><br><span class="line">```        </span><br><span class="line"></span><br><span class="line">可以使用validateStatus设置选项自定义HTTP状态码的错误范围。</span><br></pre></td></tr></table></figure>
<p>axios.get(‘user/12345’,{<br>    validateStatus:function(status){<br>        return status &lt; 500; // Reject only if the status code is greater than or equal to 500<br>    }<br>});<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 取消请求</span><br><span class="line"></span><br><span class="line">可以使用cancel token取消一个请求。</span><br><span class="line"></span><br><span class="line">可以使用CancelToke.source工厂函数创建一个cancel token：</span><br></pre></td></tr></table></figure></p>
<p>var source = CancelToken.source();</p>
<p>axios.get(‘/user/12345’, {<br>    cancelToken:source.toke<br>}).catch(function(thrown) {<br>    if (axiso.isCancel(thrown)) {<br>        console.log(‘Rquest canceled’, thrown.message);<br>    } else {<br>        // handle error<br>        // TODO<br>    }<br>});</p>
<p>// 取消请求(信息参数是可设置的)<br>source.cancel(‘Operation canceled by the user.’);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">可以给CancelToken构造函数传递一个executor function来创建一个cancel token：</span><br></pre></td></tr></table></figure></p>
<p>var CancelToken = axios.CancelToken;<br>var cancel;</p>
<p>axios.get(‘/user/12345’, {<br>    cancelToken: new CancelToken(function executor(c) {<br>        // 这个executor函数接受一个cancel function作为参数<br>        cancel = c;<br>    })<br>});</p>
<p>// 取消请求<br>cancel();<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### Node.js</span><br><span class="line"></span><br><span class="line">在nodejs中可以如下使用querystring：</span><br></pre></td></tr></table></figure></p>
<p>var querystring = require(‘querystring’);<br>axios.post(‘<a href="http://something.com/&#39;" target="_blank" rel="noopener">http://something.com/&#39;</a>, querystring.stringify({foo:’bar’}));<br><code>`</code></p>
<h3 id="Promises"><a href="#Promises" class="headerlink" title="Promises"></a>Promises</h3><p>axios基于原生的ES6 Promise实现。如果环境不支持请使用<a href="https://github.com/stefanpenner/es6-promise" target="_blank" rel="noopener">polyfill</a>。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/02/vue-router2基础＋实践/" itemprop="url">
                  vue-router2基础＋实践
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-03-02T00:00:00+08:00" content="2017-03-02">
              2017-03-02
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/web开发/" itemprop="url" rel="index">
                    <span itemprop="name">web开发</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/03/02/vue-router2基础＋实践/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/02/vue-router2基础＋实践/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://oe3sqmqy4.bkt.clouddn.com/maxresdefault.jpg" alt></p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>Vue.js的一大特色就是构建单页面应用十分方便，vue-router是Vue.js官方的路由插件，它和vue.js是深度集成的，适合用于构建单页面应用。vue的单页面应用是基于路由和组件的，路由用于设定访问路径，并将路径和组件映射起来。传统的页面应用，是用一些超链接来实现页面切换和跳转的。在vue-router单页面应用中，则是路径之间的切换，也就是组件的切换。既然要方便构建单页面应用那么自然少不了路由，vue-router就是vue官方提供的一个路由框架。</p>
<h3 id="路由的安装"><a href="#路由的安装" class="headerlink" title="路由的安装"></a>路由的安装</h3><h4 id="npm安装"><a href="#npm安装" class="headerlink" title="npm安装"></a>npm安装</h4><p>可以使用npm直接安装插件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router --save</span><br></pre></td></tr></table></figure>
<p>执行命令完成vue-router的安装，并在package.json中添加了vue-router的依赖。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;dependencies&quot;: &#123;</span><br><span class="line">   ...</span><br><span class="line">   &quot;vue-router&quot;: &quot;^2.1.0&quot;</span><br><span class="line">   ...</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>如果是要安装在开发环境下，则使用以下命令行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router --save-dev</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;devDependencies&quot;: &#123;</span><br><span class="line">  ...</span><br><span class="line">  &quot;vue-router&quot;: &quot;^2.1.0&quot;,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="直接下载-CDN"><a href="#直接下载-CDN" class="headerlink" title="直接下载/CDN"></a>直接下载/CDN</h4><p><a href="https://unpkg.com/vue-router/dist/vue-router.js" target="_blank" rel="noopener">https://unpkg.com/vue-router/dist/vue-router.js</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;/path/to/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;/path/to/vue-router.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="路由实现"><a href="#路由实现" class="headerlink" title="路由实现"></a>路由实现</h3><p>一个最简单的单页面应用</p>
<h4 id="app-js"><a href="#app-js" class="headerlink" title="app.js"></a>app.js</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import App from &apos;./App&apos;</span><br><span class="line">import VueRouter from &apos;vue-router&apos;</span><br><span class="line">import Page01 from &apos;./components/page01&apos;</span><br><span class="line">import Page02 from &apos;./components/page02&apos;</span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter) // 全局安装路由功能</span><br><span class="line"></span><br><span class="line">// 定义路径</span><br><span class="line">const routes = [</span><br><span class="line">  &#123; path: &apos;/&apos;, component: Page01 &#125;,</span><br><span class="line">  &#123; path: &apos;/02&apos;, component: Page02 &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">// 创建路由对象</span><br><span class="line">const router = new VueRouter(&#123;</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">new Vue(&#123;</span><br><span class="line">  el: &apos;#app&apos;,</span><br><span class="line">  template: &apos;&lt;App/&gt;&apos;,</span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  router</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="App-vue"><a href="#App-vue" class="headerlink" title="App.vue"></a>App.vue</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;router-link to=&quot;/&quot;&gt;01&lt;/router-link&gt;</span><br><span class="line">    &lt;router-link to=&quot;/02&quot;&gt;02&lt;/router-link&gt;</span><br><span class="line">    &lt;br/&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h4 id="page01-vue"><a href="#page01-vue" class="headerlink" title="page01.vue"></a>page01.vue</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;page01&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h4 id="page02-vue"><a href="#page02-vue" class="headerlink" title="page02.vue"></a>page02.vue</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;page02&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>npm安装vue-router</li>
<li>Vue.use(VueRouter)全局安装路由功能</li>
<li>定义路径数组routes并创建路由对象router</li>
<li>将路由注入到Vue对象中</li>
<li>在根组件中使用<router-link>定义跳转路径</router-link></li>
<li>在根组件中使用<router-view>来渲染组件</router-view></li>
<li>创建子组件</li>
</ul>
<h3 id="路由的跳转"><a href="#路由的跳转" class="headerlink" title="路由的跳转"></a>路由的跳转</h3><h4 id="router-link"><a href="#router-link" class="headerlink" title="router-link"></a>router-link</h4><p><strong>router-link</strong>标签用于页面的跳转</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/page01&quot;&gt;page01&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
<p>点击router-link标签router-view就会渲染路径为/page01的页面。</p>
<h4 id="router-push"><a href="#router-push" class="headerlink" title="router.push"></a>router.push</h4><p>通过JS代码控制路由的界面渲染</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 字符串</span><br><span class="line">router.push(&apos;home&apos;)</span><br><span class="line">// 对象</span><br><span class="line">router.push(&#123; path: &apos;home&apos; &#125;)</span><br><span class="line">// 命名的路由</span><br><span class="line">router.push(&#123; name: &apos;user&apos;, params: &#123; userId: 123 &#125;&#125;)</span><br><span class="line">// 带查询参数，变成 /register?plan=private</span><br><span class="line">router.push(&#123; path: &apos;register&apos;, query: &#123; plan: &apos;private&apos; &#125;&#125;)</span><br></pre></td></tr></table></figure>
<p>实例中的语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 字符串</span><br><span class="line">this.$router.push(&apos;home&apos;)</span><br><span class="line">// 对象</span><br><span class="line">this.$router.push(&#123; path: &apos;home&apos; &#125;)</span><br><span class="line">// 命名的路由</span><br><span class="line">this.$router.push(&#123; name: &apos;user&apos;, params: &#123; userId: 123 &#125;&#125;)</span><br><span class="line">// 带查询参数，变成 /register?plan=private</span><br><span class="line">this.$router.push(&#123; path: &apos;register&apos;, query: &#123; plan: &apos;private&apos; &#125;&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="router-replace"><a href="#router-replace" class="headerlink" title="router.replace"></a>router.replace</h4><p>push方法会向 history 栈添加一个新的记录，而replace方法是替换当前的页面，不会向 history 栈添加一个新的记录。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/05&quot; replace&gt;05&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$router.replace(&#123; path: &apos;/05&apos; &#125;)</span><br></pre></td></tr></table></figure>
<h4 id="router-go"><a href="#router-go" class="headerlink" title="router.go"></a>router.go</h4><p>控制history记录的前进和后退</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 在浏览器记录中前进一步，等同于 history.forward()</span><br><span class="line">this.$router.go(1)</span><br><span class="line">// 后退一步记录，等同于 history.back()</span><br><span class="line">this.$router.go(-1)</span><br><span class="line">// 前进3步记录router.go(3)</span><br><span class="line">this.$router.go(3)</span><br></pre></td></tr></table></figure>
<h3 id="传参方式"><a href="#传参方式" class="headerlink" title="传参方式"></a>传参方式</h3><p>由跳转的过程中会传递一个object，我们可以通过watch方法查看路由信息对象。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">  &apos;$route&apos; (to, from) &#123;</span><br><span class="line">      console.log(to);</span><br><span class="line">      console.log(from);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>控制台看到的路由信息对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  params: &#123; id: &apos;123&apos; &#125;,</span><br><span class="line">  query: &#123; name: &apos;jack&apos; &#125;,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="params"><a href="#params" class="headerlink" title="params"></a>params</h4><p>路由配置文件中定义参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // 订单详情</span><br><span class="line">  path: &apos;/order/detail/:orderId&apos;,</span><br><span class="line">  name: &apos;orderDetail&apos;,</span><br><span class="line">  component: OrderDetailView</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>路径后面的/:orderId就是我们要传递的参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$router.push(&#123; path: &apos;/order/detail/441&apos;&#125;);</span><br></pre></td></tr></table></figure>
<p>此时路由跳转的地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:3000/#/order/detail/441</span><br></pre></td></tr></table></figure>
<h5 id="组件中获取数据"><a href="#组件中获取数据" class="headerlink" title="组件中获取数据"></a>组件中获取数据</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;&#123;&#123; $route.params.orderId &#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(this.$route.params.orderId)</span><br></pre></td></tr></table></figure>
<h4 id="query"><a href="#query" class="headerlink" title="query"></a>query</h4><p>query传递数据的方式就是URL常见的查询参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link :to=&quot;&#123; path: &apos;/order/detail&apos;, query: &#123; id: item.id, stateId: item.stateId &#125;&#125;&quot;&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$router.push(&#123;path: &apos;/order/detail&apos;, query: &#123;id: orderIdCache&#125;&#125;);</span><br></pre></td></tr></table></figure>
<p>获取数据和params是一样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;&#123;&#123; $route.query.orderId &#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(this.$route.query.orderId)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/10/微信小程序开发实践总结/" itemprop="url">
                  微信小程序开发实践总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-01-10T00:00:00+08:00" content="2017-01-10">
              2017-01-10
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/微信小程序/" itemprop="url" rel="index">
                    <span itemprop="name">微信小程序</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2017/01/10/微信小程序开发实践总结/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/10/微信小程序开发实践总结/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://oe3sqmqy4.bkt.clouddn.com/201701051003042966.png" alt></p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>近日，小程序如约而至在1月9日凌晨在微信IOS和Android最新6.5.3版本中上线了期待已久的微信小程序，用户只需要更新最新版微信并搜索自己感兴趣的就能够体验已发布的小程序了。本人有幸和另一位团队的小伙伴也一起参与了公司车管家小程序的开发，我们前端这边的开发整体进度都还算顺利没有遇到特别坑的地方，当然这里离不开小伙伴雪娇童鞋她们在这之前做了很多产品和技术上的调研以及做了Demo的实践还有分享等等工作，都确保了我们开发上没有遇到大的阻碍。现将我从小程序的学习到开发到测试的过程中遇到的问题和踩的一些坑做一个小总结。</p>
<h3 id="关于整体的开发模式"><a href="#关于整体的开发模式" class="headerlink" title="关于整体的开发模式"></a>关于整体的开发模式</h3><p>小程序不像我们前端er日常开发web和H5那样在任意一个文本编辑器里编写代码在浏览器中就能实时看到页面还有本地和对外访问的链接地址，小程序是没有这些的（后面有牛人开发并开源了<strong>WEPT</strong>,集成了微信小程序组件UI可以在浏览器中查看调试）。微信为开发小程序应用提供了<strong>web开发者工具</strong>供开发者使用（实际开发中这工具开发体验真是low到可以了），建议大家实际开发时依旧使用自己的IDE，用<strong>WEPT</strong>或者<strong>web开发者工具</strong>查看页面。从小程序的开发语言中我们可以看到一些<code>React</code>、<code>Angular</code>以及<code>Vue</code>的影子，也许小程序就是集大成了这三大目前最主流的前端框架（?问号脸），因此只要开发者之前有这三种框架的开发经验再认真阅读阅读小程序的API文档，那么小程序的学习成本和上手开发成本都不是很高。它的模式很闭环很严格限制，只要按照最新的官方文档去规范开发，开发完成利用开发者工具平台打包压缩上传至微信服务器，然后微信进行审核，审核通过后会发布上线，用户在客户端搜索小程序名称获取并离线缓存至微信本地文件系统，供用户离线浏览访问。</p>
<h3 id="关于开发者工具"><a href="#关于开发者工具" class="headerlink" title="关于开发者工具"></a>关于开发者工具</h3><p><img src="http://oe3sqmqy4.bkt.clouddn.com/aa.png" alt></p>
<p>左侧边栏切换选项依次是：</p>
<h5 id="编辑"><a href="#编辑" class="headerlink" title="编辑"></a>编辑</h5><p>编辑选项中可以实时查看页面UI并且支持切换不同主流移动设备和网络环境以供适配和测试。右侧是代码编辑区，包括项目目录结构和文件编辑区。这里建议在新建目录或是文件时选择在开发者工具的这里新建比较快捷方便。编辑代码在自己的IDE中。</p>
<h5 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h5><p><img src="http://oe3sqmqy4.bkt.clouddn.com/b.png" alt></p>
<p>看着是不是眼熟？这不就是我们熟悉的Chrome的调试面板吗，是的没错，但需要注意我们看到的“Dom元素”是在<code>wxml</code>文件下的，这里看到的也不是标准的Dom，而是类似<code>React</code>微信封装的一系列自定义组件，比如<code>view</code>、<code>text</code>、<code>button</code>、<code>map</code>、<code>image</code>等。右边是<strong>Styles</strong>和<strong>Dataset</strong>，Styles查看组件样式内容的，Dataset是查看绑定在UI组件上的自定义<code>data-*</code>属性。这里注意调试页面时要将<strong>Wxml</strong>这个Tab选项排在面板第一位才能查看组件元素。</p>
<p><img src="http://oe3sqmqy4.bkt.clouddn.com/c.png" alt></p>
<p><strong>Sources面板</strong>可以查看项目资源文件，可以打断点调试页面对应js逻辑代码及<code>Watch</code>我们需要观察的变量等，这和<code>Chrome</code>里的差不多就不多赘述了。</p>
<p><img src="http://oe3sqmqy4.bkt.clouddn.com/d.png" alt></p>
<p><strong>AppData</strong>选项面板是web开发者工具特有的一项，提供的这个辅助功能非常有用，这里会显示每个页面<code>Page({})</code>实例中<code>data</code>数据对象的所有属性和值并且所有值都是可编辑的，这样就省去了不用我们开发调试时每次都要更改代码才能看到视图页面的变化，只要在这里编辑<code>data</code>属性的值就可以了，方便快捷高效。这里会显示你访问浏览过的页面对应的<code>Page({})</code>实例下的<code>data</code>数据对象，当然也可以只展示当前调试页面的<code>data</code>对象，将启动页面设置为当前调试页面即可。这里的<code>data</code>对象还支持<code>Code</code>和<code>Tree</code>两种切换查看模式，切换至<code>Code</code>模式下可以看到当前<code>data</code>对象下具体的所有数据。当声明的变量过多时这里还支持查询，可以快速锁定需要调试的变量属性。</p>
<h5 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h5><p><img src="http://oe3sqmqy4.bkt.clouddn.com/e.jpeg" alt></p>
<p>在项目面板中有以下几点小细节可以关注下：</p>
<ul>
<li>点击<strong>预览</strong>会生成一个二维码，开发者可以用手机设备扫二维码进行真机调试，如果在<code>app.json</code>中配置了<code>debug: true</code>，则如果在真机中打开调试就会出现<strong>vconsole</strong>控制台，可以进行一些log的输出及设备信息的查看。</li>
<li>如果只想单独调试某一个page，则可以点击<strong>预览</strong>右侧的小箭头进行自定义预览的页面设置。</li>
<li>下面有几个工具支持的功能，如果项目统一用ES6则可以勾选<strong>开启ES6转ES5</strong>；可以灵活的选择勾选<strong>监听文件变化自动刷新开发者工具</strong>，本人实际开发时是写页面的时候不勾选（因为每次习惯性的按<code>Ctrl+S</code>或<code>Commond+S</code>开发工具都会reload一遍，作为有轻微强迫症的我还是有点心疼自己mac的…我一般是手动刷新），当页面写完调试js逻辑功能时可以勾选。</li>
<li>最后一项<strong>开发环境不校验请求域名以及TLS版本</strong>，这是一个挺重要的功能，在开发时我们用的更多都是测试环境的接口，可能这些接口服务器域名不是<code>https</code>的或者不在事先管理后台配置的合法域名内，此时勾选这一项就可以正常使用测试环境的接口以及一些第三方平台提供的Mock数据接口，因为开发者工具帮你做了请求代理。</li>
<li>最下面的<strong>删除项目</strong>按钮可以将当前小程序项目从开发者工具中删除。</li>
</ul>
<h3 id="关于开发语言及小技巧"><a href="#关于开发语言及小技巧" class="headerlink" title="关于开发语言及小技巧"></a>关于开发语言及小技巧</h3><ul>
<li>wxml：基本上和写html是一样的，但一定要用小程序API提供的组件标记，不可随意使用HTML的一些标签元素！使用这些组件标记就会有默认的组件样式；可以像<code>Angular</code>和<code>Vue</code>一样在这些组件标记上绑定事件、条件判断指令、循环指令等。</li>
<li>wxss：小程序的页面样式表文件，官方推荐使用<strong>Flex</strong>弹性盒方式进行页面布局，以及提供了响应式单位<code>rpx</code>（设计图最好给成750的，开发时设计图是多少px对应样式属性就是多少rpx！），小程序提供了全局样式<code>app.wxss</code>和页面局部样式page的wxss文件，我们可以将项目的所有公共样式放在app.wxss中，这样可以复用到任何一个页面中。</li>
<li>特殊标记<code>block</code>：这不是一个UI组件，是一个包装元素，可以利用它很好的进行对页面结构进行判断循环展示等。</li>
<li>以<code>bind</code>和<code>catch</code>开头再加上事件名称就组成了小程序的绑定事件，还可以在标记元素上绑定自定义属性供逻辑层js获取。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;block wx:if=&quot;&#123;&#123;item.status === 1&#125;&#125;&quot;&gt;</span><br><span class="line">  &lt;button type=&quot;default&quot; hover-class=&quot;button-hover&quot; hover-stay-time=&quot;100&quot; class=&quot;btn-pay&quot; data-ordernum=&quot;&#123;&#123;item.ordernum&#125;&#125;&quot; bindtap=&quot;bindOrderPayTap&quot;&gt;立即支付&lt;/button&gt;</span><br><span class="line">&lt;/block&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bindOrderPayTap: function(e) &#123;</span><br><span class="line">  // 微信支付</span><br><span class="line">  Payment.requestPayment(&#123;</span><br><span class="line">    ordernum: e.target.dataset.ordernum ? e.target.dataset.ordernum : &apos;&apos;,</span><br><span class="line">    openId: App.globalData.openId ? App.globalData.openId : &apos;&apos;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>页面和路由跳转传参</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;navigator url=&quot;/pages/wz-records/wz-records?plateNum=京A12345&quot;&gt;&lt;/navigator&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wx.navigateTo(&#123;</span><br><span class="line">  url: &apos;../wz-records/wz-records?plateNum=&apos; + params.plateNum</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>目标页面接收参数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad(option) &#123;</span><br><span class="line">    wx.setNavigationBarTitle(&#123;</span><br><span class="line">      title: option.plateNum</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>在使用<code>wx:for</code>循环渲染时要添加<code>wx:key</code>否则会报<code>warning</code>警告。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class=&quot;dj-group mb30&quot; wx:for=&quot;&#123;&#123;orderList&#125;&#125;&quot; wx:for-item=&quot;item&quot; wx:key=&quot;*this&quot;&gt;</span><br><span class="line">  &lt;!-- ... --&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>小程序虽然提供了ES6转化ES5，但是新的API比如说<code>Promise</code>它并不支持，那么恶心的异步回调地狱问题就不可避免了，我的做法是除过第一次的<code>request</code>外之后需要进行异步<code>request</code>的都单另封装在一个方法中，这样在请求的回调中调用方法即可不用层层<code>request</code>请求嵌套下去。</li>
<li>注意在<code>request</code>请求中，<code>method</code>不同对应的<code>header</code>的<code>content-type</code>也是不同的（这点很重要！）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">wx.request(&#123;</span><br><span class="line">  url: &apos;&apos;,</span><br><span class="line">  method: &apos;GET&apos;,</span><br><span class="line">  header: &#123;</span><br><span class="line">    &apos;content-type&apos;: &apos;application/json&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  success: (res) =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  fail: (res) =&gt; &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>当<code>method</code>为<code>GET</code>方式时：<code>&#39;content-type&#39;: &#39;application/json&#39;</code></p>
<p>当<code>method</code>为<code>POST</code>方式（或者表单提交）时：<code>&#39;content-type&#39;: &#39;application/x-www-form-urlencoded&#39;</code></p>
<ul>
<li><p>注意event.target.dataset与event.currentTarget.dataset的区别：target.dataset是取源组件上设置的数据集合，currentTarget.dataset是取当前组件上设置的数据集合。</p>
</li>
<li><p>微信官方给出的page的生命周期的图片:</p>
</li>
</ul>
<p><img src="http://img.blog.csdn.net/20161012190123468" alt></p>
<h3 id="关于开发建议"><a href="#关于开发建议" class="headerlink" title="关于开发建议"></a>关于开发建议</h3><ul>
<li>在项目中我们可以将公共的工具方法、公共的配置项（如接口URL等）、公用的业务逻辑（如调起微信支付等）抽离当前业务成公共方法，这样满足模块化开发的思想也提高了代码的高度复用性。</li>
<li>如果团队统一使用ES6语法开发切记一定要在开发者工具、IOS手机设备、Android手机设备上运行都是不报错没有问题的！！我在一处使用了<code>for (let item of arr) {}</code>语法循环数据时就踩坑了，一直以为没问题直到最后提测时才发现在安卓上这ES6语法报错不识别，最后改成了<code>.forEach(function(item, index) {})</code>。</li>
<li>写页面布局结构时最好使用Flex弹性盒布局。</li>
<li>使用navigateTo路由跳转时，小程序会缓存上一个页面到内存栈中（最多5个！）所以一些加载页面时做的一些逻辑判断一定写在<code>onLoad</code>或者<code>onReady</code> <code>onShow</code>中。</li>
<li>所有图片资源都先在本地压缩（小图标图做sprit合并）然后再统一上传到CDN服务器上，页面图片地址直接走https服务器（因为小程序最大限制1M所以最好别把图片放本地了）。</li>
<li>微信登陆通过<code>code</code>获取<code>openId</code>作为小程序用户的唯一标识，小程序提供了微信用户登录的接口API以及获取用户信息的API，不过并不会反回用户的<code>openId</code>，此时需要我们自己的服务端提供这样的接口来获取用户的<code>openId</code>。具体实现方法是先调用登陆请求方法<code>wx.login({})</code>后返回<code>code</code>，再通过<code>code</code>去请求我们自己服务器的接口用来返回<code>openId</code>。具体代码实现如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// 用户登录</span><br><span class="line">wx.login(&#123;</span><br><span class="line"> success: (res) =&gt; &#123;</span><br><span class="line">   // 获取openId</span><br><span class="line">   if (res.code) &#123;</span><br><span class="line">     wx.request(&#123;</span><br><span class="line">       url: &apos;&apos;,</span><br><span class="line">       method: &apos;POST&apos;,</span><br><span class="line">       data: &#123;</span><br><span class="line">         code: res.code</span><br><span class="line">       &#125;,</span><br><span class="line">       header: &#123;</span><br><span class="line">         &apos;content-type&apos;: &apos;application/x-www-form-urlencoded&apos;</span><br><span class="line">       &#125;,</span><br><span class="line">       success: (res) =&gt; &#123;</span><br><span class="line">         if (res.data &amp;&amp; res.data.errcode === 0) &#123;</span><br><span class="line">           if (res.data.openid) &#123;</span><br><span class="line">             that.globalData.openId = res.data.openid;</span><br><span class="line">           &#125;</span><br><span class="line">         &#125; else &#123;</span><br><span class="line">           console.log(&apos;获取openId失败：&apos; + res.data.errcode + &apos;=====&gt;&apos; + res.data.errmsg)</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>成功获取到<code>openId</code>后我们可以将其绑定在全局变量<code>globalData</code>上，这样就可以在任意<code>page</code>中访问到<code>globeData</code>下的<code>openId</code>。</p>
<ul>
<li>微信支付：小程序提供了调用微信支付的API方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">wx.requestPayment(&#123;</span><br><span class="line">  &apos;timeStamp&apos;: &apos;&apos;,</span><br><span class="line">  &apos;nonceStr&apos;: &apos;&apos;,</span><br><span class="line">  &apos;package&apos;: &apos;&apos;,</span><br><span class="line">  &apos;signType&apos;: &apos;MD5&apos;,</span><br><span class="line">  &apos;paySign&apos;: &apos;&apos;,</span><br><span class="line">  &apos;success&apos;:function(res)&#123;</span><br><span class="line">  	</span><br><span class="line">  &#125;,</span><br><span class="line">  &apos;fail&apos;:function(res)&#123;</span><br><span class="line">  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>一开始看文档以为需要传的这5个参数值是前端要做的，后面仔细看了关于支付方面的文档和技术原理示意图，发现这几个参数不需要前端处理（也不安全…），这依旧需要我们自己的服务端提供接口给返回，最后沟通了公司负责支付相关的部门他们给予了支持，所有所需参数都由负责支付部门的提供返回。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">let requestPayment = (obj) =&gt; &#123;</span><br><span class="line">  return wx.request(&#123;</span><br><span class="line">    url: &apos;&apos;, // 开发者自己业务的服务端接口</span><br><span class="line">    method: &apos;GET&apos;,</span><br><span class="line">    data: &#123;</span><br><span class="line">      ordernum: obj.ordernum,</span><br><span class="line">      openid: obj.openId</span><br><span class="line">    &#125;,</span><br><span class="line">    header: &#123;</span><br><span class="line">      &apos;content-type&apos;: &apos;application/json&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    success: (res) =&gt; &#123;</span><br><span class="line">      if (res.data &amp;&amp; res.data.returncode === 1) &#123;</span><br><span class="line">        const result = res.data.result ? res.data.result : &#123;&#125;;</span><br><span class="line"></span><br><span class="line">        // 微信支付</span><br><span class="line">        wx.requestPayment(&#123;</span><br><span class="line">          &apos;timeStamp&apos;: result.timeStamp, // 当前时间戳</span><br><span class="line">          &apos;nonceStr&apos;: result.nonceStr, // 随机字符串</span><br><span class="line">          &apos;package&apos;: result.package, // 统一下单接口</span><br><span class="line">          &apos;signType&apos;: result.signType, // 签名算法</span><br><span class="line">          &apos;paySign&apos;: result.paySign, // 签名</span><br><span class="line">          &apos;success&apos;: (res) =&gt; &#123;</span><br><span class="line">            if (res.errMsg === &apos;requestPayment:ok&apos;) &#123;</span><br><span class="line">              // 成功</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              // TODO</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &apos;fail&apos;: (res) =&gt; &#123;</span><br><span class="line">            // 用户取消支付</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        // TODO</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    fail: (res) =&gt; &#123;</span><br><span class="line">      // TODO</span><br><span class="line">    &#125;,</span><br><span class="line">    complete: (res) =&gt; &#123;</span><br><span class="line">      // TODO</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="思考与总结"><a href="#思考与总结" class="headerlink" title="思考与总结"></a>思考与总结</h3><h4 id="优势？"><a href="#优势？" class="headerlink" title="优势？"></a>优势？</h4><ul>
<li><p>低门槛下载，作为微信的一环，可以通过微信直接进入，即可使用。</p>
</li>
<li><p>跨平台，微信客户端底层封装，支持小程序跨平台。</p>
</li>
<li><p>开发成本低，通过之前的开发对比，小程序的开发比web app 的开发成本还低，并且前端的资源存放、发布运维都集成在微信中。</p>
</li>
<li><p>页面仿原生，体验更流畅。</p>
</li>
<li><p>小程序可以使用微信的支付功能。</p>
</li>
</ul>
<h4 id="局限？"><a href="#局限？" class="headerlink" title="局限？"></a>局限？</h4><ul>
<li><p>开发基于微信框架，部分功能受限，不支持现有的其他第三方插件。</p>
</li>
<li><p>小程序页面只能同时打开5个，如果交互流程较长难以支持。</p>
</li>
<li><p>小程序包大小限制为1M（目前），所有只适合轻量级。</p>
</li>
</ul>
<p>最后安利一段最近看到的不错的语录：</p>
<blockquote>
<p>“所有的成长过程都是从提出一个问题开始，并找到了答案，最后融入自身的价值观，完成下一次更好的选择，周而复始。”</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/10/使用Service workers实现离线内容/" itemprop="url">
                  使用Service workers实现离线内容
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-10T00:00:00+08:00" content="2016-11-10">
              2016-11-10
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端技术/" itemprop="url" rel="index">
                    <span itemprop="name">前端技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/11/10/使用Service workers实现离线内容/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/10/使用Service workers实现离线内容/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>原文地址：<a href="https://madebymike.com.au//writing/service-workers/" target="_blank" rel="noopener">Offline content with service workers</a></p>
</blockquote>
<p>Service workers不只是对网页进行离线支持它还可以做很多事情，但是包括我自己在内对于大多数人而言，这将是他们的第一次使用Service workers经验。我最近给我的博客实现了一个简单的离线页面，令我惊喜的是使用它竟然是如此的简单。（充满着十足的自信）我想我可以做更多的事情。我决定开始保存我的博客文章从而实现离线阅读，并且很快开始投入实践。之后我很快意识到这个“坑”很深。</p>
<p>这并不是在责怪service workers，而这是一个迹象，说明它们是多么的强大和灵活。还好发现的及时，随着概念变得越来越熟悉，以及复杂性逐渐被抽象化，离线内容将变得更加常见。事实上，我喝了Kool-Aid(译者注：一种饮料)，并且我可以知道为什么很多人认为，在几年内离线内容将像如今在web开发中的响应式设计一样变的无处不在。</p>
<p>话虽如此，但是在开始之前这里有一些事情我希望我是知道的。</p>
<h3 id="浏览器支持缓存"><a href="#浏览器支持缓存" class="headerlink" title="浏览器支持缓存"></a>浏览器支持缓存</h3><p>Service workers表面上看是一个渐进增强的简单备选方案，在注册一个service worker之前检测它的支持性是很简单的。你可以像这样去做：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if (&apos;serviceWorker&apos; in navigator) &#123;</span><br><span class="line">  // Yay, service workers work!</span><br><span class="line">  navigator.serviceWorker.register(&apos;/sw.js&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>看上去似乎足够简单，但是这里有一个问题。如果你看过了<a href="https://developer.mozilla.org/en-US/docs/Web/API/Cache" target="_blank" rel="noopener">MDN page for the service worker cache API</a>，你将会了解到不同版本的Chrome浏览器支持不同的缓存方法。这也就意味着，尽管你认真努力的做了功能的支持性检测，当使用<code>addAll</code>方法的时候介于版本为40和45之间的Chrome将会出现一个错误。当这些版本的浏览器被更加广泛的使用的时候这就是一个问题了。我在写这篇文章的时候已经在<a href="http://caniuse.com/usage-table" target="_blank" rel="noopener">Can I Use</a>检测过了，看上去它可能会影响到约1.15%的用户。</p>
<p>在开始service workers之前我已经读了几篇相关的博客和教程。一些人主张仅仅是使用<code>put</code>而不是<code>addAll</code>，其他人则推荐使用<a href="https://github.com/dominiccooney/cache-polyfill" target="_blank" rel="noopener">cache pollyfill</a>，尽管其他一些人还仍然没有提到它。明显的这些都是在不同的时间段写的，并且为了找出正确的方式我花费了很多的时间去研究它。</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/11/10/使用Service workers实现离线内容/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/31/构建跨平台Electron应用4个必知的小技巧/" itemprop="url">
                  构建跨平台Electron应用4个必知的小技巧
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-31T00:00:00+08:00" content="2016-10-31">
              2016-10-31
            </time>
          </span>

          
            <span class="post-category">
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/前端技术/" itemprop="url" rel="index">
                    <span itemprop="name">前端技术</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/31/构建跨平台Electron应用4个必知的小技巧/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/31/构建跨平台Electron应用4个必知的小技巧/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>原文地址：<a href="https://blog.avocode.com/blog/4-must-know-tips-for-building-cross-platform-electron-apps" target="_blank" rel="noopener">4 must-know tips for building cross platform Electron apps</a></p>
</blockquote>
<p><img src="http://oe3sqmqy4.bkt.clouddn.com/22dc7f3e89b76e7b581c.png" alt></p>
<p>在其他众多的应用中，<a href="https://electron.atom.io/" target="_blank" rel="noopener">Electron</a>技术驱动着Avocode（译者注：一款设计师和开发者的合作工具），Electron可以让你构建一个运行非常快速流畅的跨平台桌面应用。</p>
<blockquote>
<p>If you don’t pay attention you will quickly end up in the uncanny valley of apps, though. Apps that don’t feel quite in place among your other apps.（如果有些问题不注意的话，你的App很快就会掉到“坑”里，无法从其它众多App中脱颖而出。）</p>
</blockquote>
<p>这是2016年5月在阿姆斯特丹的<strong>Electron Meetup</strong>上我做的发言的整理稿内容，由于要考虑到API的变化所以这里做了一些更新。值得注意的是，我这里会做一些更加详细的叙述，并且假设你们对Electron有了一些了解。</p>
<h4 id="首先，我是谁？"><a href="#首先，我是谁？" class="headerlink" title="首先，我是谁？"></a>首先，我是谁？</h4><p>我是Kilian Valkhof，一个前端开发者、交互设计师、app开发者，当然这取决于你问的对象是谁了。我有超过10年的互联网从业经验，并且在各式各样的环境下开发出很多的桌面应用，比如<strong>GTK</strong>和<strong>Qt</strong>，当然了它们都是使用的Electron。</p>
<p>我最近开发的应用是<a href="https://fromscratch.rocks/" target="_blank" rel="noopener">Fromscratch</a>，它是一款跨平台免费的带有自动保存功能的记笔记应用。</p>
<p>在开发Fromscratch期间，我花了大量时间去确保这款应用在所有三大平台上都能保持良好的运行且可以感觉到体验很棒，并找出了可以用Electron来实现它的方法。这些都是我挖坑填坑过程中积累起来的。</p>
<p>让一款使用Electron开发的应用体验起来很好并且很稳定并不难，而你仅仅需要去确定你关注到的是它的细节。</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/10/31/构建跨平台Electron应用4个必知的小技巧/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="马跃Marico">
          <p class="site-author-name" itemprop="name">马跃Marico</p>
          <p class="site-description motion-element" itemprop="description">Front-End Developer</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">13</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/mayue2015" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://stackoverflow.com/users/5566587/marico" target="_blank" title="Stack Overflow">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Stack Overflow
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/u/2089711385?is_all=1" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/MaYueMarico" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">马跃Marico</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"marico-mayue"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  

</body>
</html>
